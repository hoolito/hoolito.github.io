<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Â•≥Â∑´ÁöÑÊØíËçØ - Á•ûÁßòÂØπÂÜ≥</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #1a1a2e, #16213e);
            color: #e6e6e6;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
            position: relative;
            overflow-x: hidden;
        }
        
        body::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: 
                radial-gradient(circle at 10% 20%, rgba(139, 0, 139, 0.15) 0%, transparent 25%),
                radial-gradient(circle at 90% 80%, rgba(0, 100, 0, 0.15) 0%, transparent 25%),
                url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="100" height="100" viewBox="0 0 100 100"><rect width="100" height="100" fill="none"/><path d="M20,20 Q40,5 60,20 T100,20 M20,50 Q40,35 60,50 T100,50 M20,80 Q40,65 60,80 T100,80" stroke="rgba(139,0,139,0.1)" stroke-width="0.5" fill="none"/></svg>');
            z-index: -1;
        }
        
        .header {
            text-align: center;
            margin: 20px 0;
            padding: 20px;
            border-bottom: 2px solid #8a2be2;
            width: 100%;
            max-width: 900px;
            position: relative;
        }
        
        h1 {
            font-size: 3.2rem;
            color: #ff6b6b;
            text-shadow: 0 0 15px rgba(255, 107, 107, 0.7);
            margin-bottom: 10px;
            letter-spacing: 3px;
            position: relative;
        }
        
        h1::after {
            content: "üßô‚Äç‚ôÄÔ∏è";
            position: absolute;
            top: -25px;
            left: 50px;
            font-size: 2.5rem;
            animation: float 3s ease-in-out infinite;
        }
        
        h1::before {
            content: "üß™";
            position: absolute;
            top: -20px;
            right: 50px;
            font-size: 2rem;
            animation: float 4s ease-in-out infinite;
        }
        
        .subtitle {
            font-size: 1.3rem;
            color: #9a86cf;
            max-width: 700px;
            margin: 10px auto;
            line-height: 1.6;
        }
        
        .game-container {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 30px;
            max-width: 1000px;
            width: 100%;
            margin-top: 20px;
        }
        
        .grid-container {
            background: rgba(26, 26, 46, 0.8);
            border-radius: 20px;
            padding: 25px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.6);
            border: 3px solid #6a5acd;
            width: 500px;
        }
        
        .grid-title {
            text-align: center;
            color: #ff6b6b;
            margin-bottom: 20px;
            font-size: 1.8rem;
            text-shadow: 0 0 8px rgba(255, 107, 107, 0.5);
        }
        
        .grid {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 15px;
            margin: 0 auto;
        }
        
        .cell {
            width: 70px;
            height: 70px;
            background: rgba(40, 44, 52, 0.8);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 34px;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid #4b0082;
            box-shadow: 0 5px 10px rgba(0, 0, 0, 0.4);
            position: relative;
            overflow: hidden;
        }
        
        .cell::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, transparent 0%, rgba(255,255,255,0.1) 100%);
            z-index: 1;
        }
        
        .cell:hover {
            transform: translateY(-8px) scale(1.05);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.5);
            background: rgba(60, 64, 72, 0.9);
            z-index: 2;
        }
        
        /* Ê≠ªÊ≥ïÊ†áËÆ∞ - Á∫¢Ëâ≤ËæπÊ°Ü */
        .cell.death-selected {
            border: 3px solid #ff6b6b;
            box-shadow: 0 0 15px rgba(255, 107, 107, 0.5);
        }
        
        /* Â∞∏Ê£ÄÊä•ÂëäÊ†áËÆ∞ - Á¥´Ëâ≤ËæπÊ°Ü */
        .cell.autopsy-selected {
            border: 3px solid #9370db;
            box-shadow: 0 0 15px rgba(147, 112, 219, 0.5);
        }
        
        /* Áé©ÂÆ∂Ë°åÂä®Ê†áËÆ∞ */
        .cell.player-move {
            background: rgba(70, 130, 180, 0.7);
        }
        
        .cell.player-move::after {
            content: "P";
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 40px;
            font-weight: bold;
            color: rgba(255, 255, 255, 0.8);
            z-index: 2;
            text-shadow: 0 0 10px rgba(0, 0, 0, 0.7);
        }
        
        /* Á≥ªÁªüË°åÂä®Ê†áËÆ∞ */
        .cell.system-move {
            background: rgba(178, 34, 34, 0.7);
        }
        
        .cell.system-move::after {
            content: "S";
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 40px;
            font-weight: bold;
            color: rgba(255, 255, 255, 0.8);
            z-index: 2;
            text-shadow: 0 0 10px rgba(0, 0, 0, 0.7);
        }
        
        .cell.revealed {
            cursor: default;
            transform: scale(0.95);
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.3);
        }
        
        .controls-container {
            background: rgba(26, 26, 46, 0.8);
            border-radius: 20px;
            padding: 25px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.6);
            border: 3px solid #6a5acd;
            width: 400px;
        }
        
        .controls {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }
        
        .control-group {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }
        
        label {
            font-size: 1.1rem;
            color: #9a86cf;
            font-weight: bold;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        label i {
            color: #ff6b6b;
        }
        
        input, textarea, select {
            padding: 14px;
            border-radius: 10px;
            border: 2px solid #4b0082;
            background: rgba(40, 44, 52, 0.8);
            color: #e6e6e6;
            font-size: 1rem;
            transition: all 0.3s;
        }
        
        input:focus, textarea:focus, select:focus {
            outline: none;
            border-color: #8a2be2;
            box-shadow: 0 0 0 3px rgba(138, 43, 226, 0.3);
        }
        
        textarea {
            min-height: 100px;
            resize: vertical;
        }
        
        .buttons {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin-top: 10px;
        }
        
        button {
            padding: 14px 30px;
            border: none;
            border-radius: 10px;
            background: linear-gradient(45deg, #6a5acd, #8a2be2);
            color: white;
            font-size: 1.1rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.4);
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        button:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.5);
            background: linear-gradient(45deg, #8a2be2, #9370db);
        }
        
        button:disabled {
            background: #555;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
            opacity: 0.7;
        }
        
        .game-status {
            font-size: 1.4rem;
            text-align: center;
            padding: 15px;
            background: rgba(26, 26, 46, 0.8);
            border-radius: 15px;
            border: 2px solid #6a5acd;
            width: 100%;
            max-width: 900px;
            margin: 20px 0;
            color: #ffd700;
            font-weight: bold;
            text-shadow: 0 0 8px rgba(255, 215, 0, 0.4);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.4);
        }
        
        .log-container {
            background: rgba(26, 26, 46, 0.8);
            border-radius: 20px;
            padding: 25px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.6);
            border: 3px solid #6a5acd;
            width: 100%;
            max-width: 900px;
            margin-bottom: 20px;
        }
        
        .log {
            width: 100%;
            max-height: 200px;
            overflow-y: auto;
            padding-right: 10px;
        }
        
        .log-title {
            color: #9a86cf;
            margin-bottom: 20px;
            text-align: center;
            font-size: 1.8rem;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }
        
        .log-entry {
            margin: 12px 0;
            padding: 12px;
            border-left: 4px solid #8a2be2;
            background: rgba(40, 44, 52, 0.5);
            border-radius: 0 10px 10px 0;
            display: flex;
            align-items: flex-start;
            gap: 10px;
            animation: fadeIn 0.5s ease;
        }
        
        .player-log {
            border-left-color: #4682b4;
        }
        
        .system-log {
            border-left-color: #b22222;
        }
        
        .autopsy-log {
            border-left-color: #ffd700;
            background: rgba(40, 44, 52, 0.7);
        }
        
        .death-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.95);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 100;
            color: white;
            text-align: center;
            padding: 20px;
            display: none;
        }
        
        .death-content {
            background: rgba(26, 26, 46, 0.95);
            border-radius: 20px;
            padding: 40px;
            max-width: 800px;
            width: 90%;
            border: 3px solid #8a2be2;
            box-shadow: 0 0 40px rgba(138, 43, 226, 0.7);
        }
        
        .death-message {
            font-size: 4rem;
            margin-bottom: 30px;
            color: #ff6b6b;
            text-shadow: 0 0 20px rgba(255, 0, 0, 0.8);
        }
        
        .death-reason {
            font-size: 1.8rem;
            margin-bottom: 40px;
            color: #ffd700;
            line-height: 1.6;
        }
        
        .instructions {
            max-width: 900px;
            margin: 30px auto;
            padding: 25px;
            background: rgba(26, 26, 46, 0.8);
            border-radius: 20px;
            border: 3px solid #6a5acd;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
        }
        
        .instructions h2 {
            color: #9a86cf;
            margin-bottom: 20px;
            text-align: center;
            font-size: 2rem;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }
        
        .instructions ul {
            padding-left: 30px;
            margin: 20px 0;
        }
        
        .instructions li {
            margin-bottom: 15px;
            line-height: 1.7;
            font-size: 1.1rem;
        }
        
        .emoji-preview {
            font-size: 1.5rem;
            margin-left: 5px;
            vertical-align: middle;
        }
        
        .example-container {
            background: rgba(40, 44, 52, 0.6);
            border-radius: 15px;
            padding: 20px;
            margin: 20px 0;
        }
        
        .example {
            margin: 15px 0;
            padding: 15px;
            background: rgba(50, 54, 62, 0.7);
            border-radius: 10px;
            border-left: 4px solid #8a2be2;
        }
        
        .player-name {
            color: #4682b4;
            font-weight: bold;
        }
        
        .opponent-name {
            color: #b22222;
            font-weight: bold;
        }
        
        @keyframes float {
            0% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
            100% { transform: translateY(0px); }
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateX(-10px); }
            to { opacity: 1; transform: translateX(0); }
        }
        
        @media (max-width: 900px) {
            .game-container {
                flex-direction: column;
                align-items: center;
            }
            
            .grid-container, .controls-container {
                width: 100%;
                max-width: 600px;
            }
            
            h1 {
                font-size: 2.5rem;
            }
        }
        
        @media (max-width: 600px) {
            .cell {
                width: 55px;
                height: 55px;
                font-size: 28px;
            }
            
            h1 {
                font-size: 2rem;
            }
            
            .death-message {
                font-size: 2.5rem;
            }
            
            .death-reason {
                font-size: 1.3rem;
            }
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>Â•≥Â∑´ÁöÑÊØíËçØ üß™</h1>
        <p class="subtitle">Âú®ËøôÂú∫Á•ûÁßòÁöÑÂØπÂÜ≥‰∏≠ÔºåËóèÂ•Ω‰Ω†ËÆæ‰∏ãÁöÑÊ≠ª‰∫°Èô∑Èò±ÔºåÂØªÊâæÂØπÊâãÁöÑËá¥ÂëΩÈÖçÊñπÔºÅÂ∞èÂøÉÊØè‰∏ÄÊ≠•ÔºåÊ≠ª‰∫°ÂèØËÉΩÂ∞±ÂèëÁîüÂú®‰∏ã‰∏Ä‰∏™emoji...</p>
    </div>
    
    <div class="game-status" id="gameStatus">ÈÄâÊã©‰Ω†ÁöÑÊ≠ªÊ≥ïÂíåÂ∞∏Ê£ÄÊä•Âëä‰ΩçÁΩÆ...</div>
    
    <!-- Êó•ÂøóÂÆπÂô®ÁßªÂä®Âà∞ÊèêÁ§∫Ê°ÜÂíåÊùêÊñôÂ∫ì‰πãÈó¥ -->
    <div class="log-container">
        <h3 class="log-title"><i class="fas fa-scroll"></i> Â•≥Â∑´ÁöÑÈ≠îÊ≥ïÊó•Âøó</h3>
        <div class="log" id="logEntries"></div>
    </div>
    
    <div class="game-container">
        <div class="grid-container">
            <div class="grid-title">Á•ûÁßòÊùêÊñôÂ∫ì</div>
            <div class="grid" id="grid"></div>
        </div>
        
        <div class="controls-container">
            <div class="controls">
                <div class="control-group">
                    <label for="deathEmoji"><i class="fas fa-skull"></i> ‰Ω†ÁöÑÊ≠ªÊ≥ï‰ΩçÁΩÆ:</label>
                    <div style="display: flex; gap: 10px;">
                        <select id="deathEmoji" style="flex: 1;"></select>
                        <input type="text" id="deathDesc" placeholder="ÊèèËø∞Ê≠ª‰∫°Âú∫ÊôØ" style="flex: 3;">
                    </div>
                </div>
                
                <div class="control-group">
                    <label for="autopsyEmoji"><i class="fas fa-file-medical"></i> Â∞∏Ê£ÄÊä•Âëä‰ΩçÁΩÆ:</label>
                    <div style="display: flex; gap: 10px;">
                        <select id="autopsyEmoji" style="flex: 1;"></select>
                        <input type="text" id="autopsyDesc" placeholder="ÊèèËø∞Ëá¥Ê≠ªÂéüÂõ†" style="flex: 3;">
                    </div>
                </div>
                
                <div class="buttons">
                    <button id="startBtn"><i class="fas fa-play"></i> ÂºÄÂßãÊ∏∏Êàè</button>
                    <button id="resetBtn"><i class="fas fa-redo"></i> ÈáçÊñ∞ÂºÄÂßã</button>
                </div>
            </div>
        </div>
    </div>
    
    <div class="instructions">
        <h2><i class="fas fa-book"></i> Ê∏∏ÊàèËßÑÂàô‰∏éÁ§∫‰æã</h2>
        
        <div class="example-container">
            <h3><i class="fas fa-lightbulb"></i> ÂâßÊú¨Á§∫‰æãÔºö</h3>
            
            <div class="example">
                <p><span class="player-name">Â∞èÊòé</span>‰∏∫<span class="opponent-name">Â∞èÁªø</span>ÂÆâÊéíÁöÑÂâßÊú¨Ôºö</p>
                <p><strong>Ê≠ªÊ≥ïüê°Ôºö</strong>ÂéªÈ•≠È¶ÜÂêÉÊ≤≥Ë±öÔºåÊ≠ª‰∫éÊ≤≥Ë±ö‰∏≠ÊØí</p>
                <p><strong>Â∞∏Ê£ÄÊä•Âëä‚ôüÔºö</strong>Ê≠ªËÄÖÊ≠ª‰∫éÊëÑÂÖ•Ëá¥ÂëΩÁâ©Ë¥®</p>
            </div>
            
            <div class="example">
                <p><span class="player-name">Â∞èÁªø</span>‰∏∫<span class="opponent-name">Â∞èÊòé</span>ÂÆâÊéíÁöÑÂâßÊú¨Ôºö</p>
                <p><strong>Ê≠ªÊ≥ïüßªÔºö</strong>‰∏äÂéïÊâÄÊó∂Ë∏©Âà∞Âú∞‰∏äÁöÑÊπøÁ∫∏Â∑æÊëîÊ≠ª</p>
                <p><strong>Â∞∏Ê£ÄÊä•Âëäüß¨Ôºö</strong>Ê≠ªËÄÖÊ≠ª‰∫éÊëîÂÄíÂêéÂ§¥ÈÉ®ÁùÄÂú∞</p>
            </div>
        </div>
        
        <div class="example-container">
            <h3><i class="fas fa-gamepad"></i> Ê∏∏ÊàèËøáÁ®ãÁ§∫‰æãÔºö</h3>
            
            <div class="example">
                <p><span class="player-name">Â∞èÊòé</span>ÈÄâÊã©<span class="emoji-preview">‚ôü</span>Ôºö‰ªäÂ§©Âéª‰∏ãÊ£ã‰∫ÜÔºåËæì‰∫Ü</p>
                <p>‚Üí <span class="player-name">Â∞èÊòé</span>Ëé∑ÂæóÂ∞∏Ê£ÄÊä•Âëä‰∏Ä‰ªΩÔºöÊ≠ªËÄÖÊ≠ª‰∫éÊëîÂÄíÂêéÂ§¥ÈÉ®ÁùÄÂú∞</p>
            </div>
            
            <div class="example">
                <p><span class="opponent-name">Â∞èÁªø</span>ÈÄâÊã©<span class="emoji-preview">ü•Æ</span>Ôºö‰ªäÂ§©ÂêÉ‰∫Ü‰∏™ÊúàÈ•ºÔºåÂë≥ÈÅìËøò‰∏çÈîô</p>
                <p>‚Üí Êó†‰∫ãÂèëÁîü</p>
            </div>
            
            <div class="example">
                <p><span class="player-name">Â∞èÊòé</span>ÈÄâÊã©<span class="emoji-preview">üßª</span>ÔºöÊÜã‰∏ç‰Ωè‰∫ÜÔºåË¶ÅÂéªÂéïÊâÄÔºÅ</p>
                <p>‚Üí ÂÄíÈúâÁöÑ<span class="player-name">Â∞èÊòé</span>‰∏äÂéïÊâÄÊó∂Ë∏©Âà∞Âú∞‰∏äÁöÑÊπøÁ∫∏Â∑æÊëîÊ≠ªÔºå‰∏ãËæàÂ≠êÊ≥®ÊÑèÁÇπÂêß</p>
                <p><strong>Êú¨Â±ÄÊ∏∏Êàè<span class="opponent-name">Â∞èÁªø</span>ËÉúÂá∫</strong></p>
            </div>
        </div>
        
        <ul>
            <li>Ê∏∏ÊàèÂºÄÂßãÊó∂Ôºå‰ºöÂ±ïÁ§∫5x5ÁΩëÊ†ºÁöÑÈöèÊú∫Á•ûÁßòÊùêÊñôÔºàemojiÔºâ<span class="emoji-preview">üß™üîÆüçÑüåøüêç</span></li>
            <li>Áé©ÂÆ∂ÂíåÁ≥ªÁªüÈúÄË¶ÅÂêÑÁßòÂØÜÈÄâÊã©‰∏§‰∏™emojiÔºö‰∏Ä‰∏™‰Ωú‰∏∫"Ê≠ªÊ≥ï"Ôºå‰∏Ä‰∏™‰Ωú‰∏∫"Â∞∏Ê£ÄÊä•Âëä"ÁöÑÈöêËóèÂú∞ÁÇπ</li>
            <li>Áé©ÂÆ∂Á°ÆËÆ§ÈÄâÊã©ÂêéÔºåÁÇπÂáª"ÂºÄÂßãÊ∏∏Êàè"ÊåâÈíÆ</li>
            <li>Ê∏∏ÊàèÂºÄÂßãÂêéÔºåÁé©ÂÆ∂ÂíåÁ≥ªÁªüËΩÆÊµÅÁÇπÂáªÊ†ºÂ≠ê</li>
            <li>ÁÇπÂáªÂêéÁöÑÊ†ºÂ≠ê‰ºöÊòæÁ§∫Ë°åÂä®Ê†áËÆ∞ÔºàP=Áé©ÂÆ∂ÔºåS=Á≥ªÁªüÔºâ</li>
            <li>ÂΩìÁé©ÂÆ∂ÁÇπÂáªÂà∞Á≥ªÁªüÁöÑÊ≠ªÊ≥ïÊó∂ÔºåÂ∞Ü‰ºöÊ≠ª‰∫°Âπ∂ËæìÊéâÊ∏∏Êàè</li>
            <li>ÂΩìÁ≥ªÁªüÁÇπÂáªÂà∞Áé©ÂÆ∂ÁöÑÊ≠ªÊ≥ïÊó∂ÔºåÁ≥ªÁªüÊ≠ª‰∫°ÔºåÁé©ÂÆ∂Ëé∑ËÉú</li>
            <li>ÁÇπÂáªÂà∞"Â∞∏Ê£ÄÊä•Âëä"Êó∂‰ºöÊè≠Á§∫ÈöêËóèÁöÑËá¥Ê≠ªÂéüÂõ†</li>
            <li><strong>Ê≥®ÊÑèÔºöÊ∏∏ÊàèËøáÁ®ã‰∏≠‰∏çË¶ÅÈÄèÈú≤Ëá™Â∑±ÁöÑÈÄâÊã©ÔºÅ</strong></li>
        </ul>
    </div>
    
    <div class="death-screen" id="deathScreen">
        <div class="death-content">
            <div class="death-message" id="deathMessage">‰Ω†Ê≠ª‰∫ÜÔºÅ</div>
            <div class="death-reason" id="deathReason"></div>
            <button id="playAgainBtn"><i class="fas fa-undo"></i> ÂÜçÁé©‰∏ÄÊ¨°</button>
        </div>
    </div>

    <script>
        // Ê∏∏ÊàèÈÖçÁΩÆ - Á°Æ‰øùÊâÄÊúâemojiÈÉΩÊòØÂîØ‰∏ÄÁöÑ
        const GRID_SIZE = 5;
        const UNIQUE_EMOJIS = [
            'üè¶', 'üîÆ', '‚õ©', 'üö≤', '‚ôü', 
            'üéÆ', 'üé±', 'ü•Æ', '‚ùÑ', 'üê°', 
            'ü¶ã', 'üëô', 'üìö', 'üõè', 'üõÅ', 
            'üßª', 'üß¨', 'üî´', 'üíø', 'üì∑', 
            'üñ•', 'üèñ', 'üßä', 'üéª', 'üç∑',
            'üß™', '‚ò†Ô∏è', 'üï∑Ô∏è', 'ü¶á', 'üçé',
            'üçÑ', 'üåø', 'üêç', 'üïØÔ∏è', '‚öóÔ∏è',
            'üß´', 'ü•Ä', 'üåë', 'üî•', 'üíß',
            'üå™Ô∏è', '‚ò£Ô∏è', '‚ò¢Ô∏è', 'üß≠', 'üóùÔ∏è'
        ];
        
        // Ê∏∏ÊàèÁä∂ÊÄÅÂèòÈáè
        let gameState = 'setup'; // setup, playing, ended
        let playerDeath = null;
        let playerAutopsy = null;
        let systemDeath = null;
        let systemAutopsy = null;
        let playerTurn = true;
        let cells = [];
        let logEntries = [];
        let emojiMap = {};
        
        // DOMÂÖÉÁ¥†
        const gridElement = document.getElementById('grid');
        const gameStatusElement = document.getElementById('gameStatus');
        const deathEmojiElement = document.getElementById('deathEmoji');
        const deathDescElement = document.getElementById('deathDesc');
        const autopsyEmojiElement = document.getElementById('autopsyEmoji');
        const autopsyDescElement = document.getElementById('autopsyDesc');
        const startBtnElement = document.getElementById('startBtn');
        const resetBtnElement = document.getElementById('resetBtn');
        const logEntriesElement = document.getElementById('logEntries');
        const deathScreenElement = document.getElementById('deathScreen');
        const deathMessageElement = document.getElementById('deathMessage');
        const deathReasonElement = document.getElementById('deathReason');
        const playAgainBtnElement = document.getElementById('playAgainBtn');
        
        // ÂàùÂßãÂåñÊ∏∏Êàè
        function initGame() {
            createGrid();
            populateSelects();
            gameState = 'setup';
            playerDeath = null;
            playerAutopsy = null;
            systemDeath = null;
            systemAutopsy = null;
            playerTurn = true;
            logEntries = [];
            updateLog();
            gameStatusElement.textContent = "ÈÄâÊã©‰Ω†ÁöÑÊ≠ªÊ≥ïÂíåÂ∞∏Ê£ÄÊä•Âëä‰ΩçÁΩÆ...";
            deathDescElement.value = "";
            autopsyDescElement.value = "";
            deathScreenElement.style.display = "none";
            startBtnElement.disabled = true;
            
            addLog("Ê∏∏ÊàèÂàùÂßãÂåñÂÆåÊàêÔºÅËØ∑ÈÄâÊã©‰Ω†ÁöÑÊ≠ªÊ≥ïÂíåÂ∞∏Ê£ÄÊä•Âëä‰ΩçÁΩÆ„ÄÇ", "system-log");
        }
        
        // Â°´ÂÖÖÈÄâÊã©Ê°Ü
        function populateSelects() {
            deathEmojiElement.innerHTML = '';
            autopsyEmojiElement.innerHTML = '';
            
            // Ê∑ªÂä†ÈªòËÆ§ÈÄâÈ°π
            const defaultOption = document.createElement('option');
            defaultOption.value = '';
            defaultOption.textContent = '-- ÈÄâÊã© --';
            deathEmojiElement.appendChild(defaultOption.cloneNode(true));
            autopsyEmojiElement.appendChild(defaultOption.cloneNode(true));
            
            // Ê∑ªÂä†ÊâÄÊúâemojiÈÄâÈ°π
            Object.entries(emojiMap).forEach(([index, emoji]) => {
                const option = document.createElement('option');
                option.value = index;
                option.textContent = emoji;
                
                deathEmojiElement.appendChild(option.cloneNode(true));
                autopsyEmojiElement.appendChild(option);
            });
            
            // Ê∑ªÂä†‰∫ã‰ª∂ÁõëÂê¨Âô®
            deathEmojiElement.addEventListener('change', function() {
                updateCellSelections();
            });
            
            autopsyEmojiElement.addEventListener('change', function() {
                updateCellSelections();
            });
        }
        
        // Êõ¥Êñ∞Ê†ºÂ≠êÈÄâÊã©Áä∂ÊÄÅ
        function updateCellSelections() {
            // Ê∏ÖÈô§‰πãÂâçÁöÑÈÄâÊã©Ê†áËÆ∞
            cells.forEach(cell => {
                cell.element.classList.remove('death-selected', 'autopsy-selected');
            });
            
            // Êõ¥Êñ∞Ê≠ªÊ≥ïÈÄâÊã©
            if (deathEmojiElement.value) {
                const deathIndex = parseInt(deathEmojiElement.value);
                cells[deathIndex].element.classList.add('death-selected');
            }
            
            // Êõ¥Êñ∞Â∞∏Ê£ÄÊä•ÂëäÈÄâÊã©
            if (autopsyEmojiElement.value) {
                const autopsyIndex = parseInt(autopsyEmojiElement.value);
                cells[autopsyIndex].element.classList.add('autopsy-selected');
            }
        }
        
        // ÂàõÂª∫ÁΩëÊ†º
        function createGrid() {
            gridElement.innerHTML = '';
            cells = [];
            
            // ÈöèÊú∫ÈÄâÊã©25‰∏™ÂîØ‰∏ÄÁöÑemoji
            const shuffledEmojis = [...UNIQUE_EMOJIS]
                .sort(() => Math.random() - 0.5)
                .slice(0, GRID_SIZE * GRID_SIZE);
            
            emojiMap = {};
            
            for (let i = 0; i < GRID_SIZE * GRID_SIZE; i++) {
                const cell = document.createElement('div');
                cell.className = 'cell';
                cell.dataset.index = i;
                cell.textContent = shuffledEmojis[i];
                
                cell.addEventListener('click', () => handleCellClick(i));
                
                gridElement.appendChild(cell);
                cells.push({
                    element: cell,
                    index: i,
                    emoji: cell.textContent,
                    revealed: false,
                    revealedBy: null
                });
                
                // Ê∑ªÂä†Âà∞emojiÊò†Â∞Ñ
                emojiMap[i] = cell.textContent;
            }
        }
        
        // Â§ÑÁêÜÊ†ºÂ≠êÁÇπÂáª
        function handleCellClick(index) {
            const cell = cells[index];
            
            if (gameState === 'ended' || cell.revealed) return;
            
            if (gameState === 'setup') {
                // Âú®ËÆæÁΩÆÈò∂ÊÆµÈÄâÊã©Ê≠ªÊ≥ïÂíåÂ∞∏Ê£Ä‰ΩçÁΩÆ
                if (!playerDeath) {
                    // ÈÄâÊã©Ê≠ªÊ≥ï
                    playerDeath = index;
                    deathEmojiElement.value = index;
                    cell.element.classList.add('death-selected');
                    gameStatusElement.textContent = `Â∑≤ÈÄâÊã©Ê≠ªÊ≥ï: ${cell.emoji}ÔºåÁé∞Âú®ÈÄâÊã©Â∞∏Ê£ÄÊä•Âëä‰ΩçÁΩÆ`;
                    addLog(`‰Ω†ÈÄâÊã©‰∫ÜÊ≠ªÊ≥ï‰ΩçÁΩÆ ${cell.emoji}`, 'player-log');
                } else if (!playerAutopsy && index !== playerDeath) {
                    // ÈÄâÊã©Â∞∏Ê£ÄÊä•Âëä‰ΩçÁΩÆ
                    playerAutopsy = index;
                    autopsyEmojiElement.value = index;
                    cell.element.classList.add('autopsy-selected');
                    gameStatusElement.textContent = "ÂáÜÂ§áÂ∞±Áª™ÔºåÁÇπÂáªÂºÄÂßãÊ∏∏Êàè";
                    startBtnElement.disabled = false;
                    addLog(`‰Ω†ÈÄâÊã©‰∫ÜÂ∞∏Ê£ÄÊä•Âëä‰ΩçÁΩÆ ${cell.emoji}`, 'player-log');
                }
            } else if (gameState === 'playing' && playerTurn) {
                // Áé©ÂÆ∂ÂõûÂêà
                revealCell(index, 'player');
                playerTurn = false;
                
                // ÁîüÊàêÁé©ÂÆ∂Ë°åÂä®ÊèèËø∞
                const action = getPlayerAction(cell.emoji);
                addLog(action, 'player-log');
                
                // Ê£ÄÊü•Ê∏∏ÊàèÁä∂ÊÄÅ
                if (index === systemDeath) {
                    endGame(false, `‰Ω†ÂèëÁé∞‰∫ÜÁ≥ªÁªüÁöÑÊ≠ªÊ≥ï${cell.emoji}Ôºå‰ΩÜ‰∏çÂπ∏Ë∫´‰∫°ÔºÅÊ≠ªÊ≥ïÔºö${getSystemDeathDesc(cell.emoji)}`);
                    return;
                } else if (index === systemAutopsy) {
                    addLog(`‰Ω†ÂèëÁé∞‰∫ÜÁ≥ªÁªüÁöÑÂ∞∏Ê£ÄÊä•Âëä${cell.emoji}ÔºÅËá¥Ê≠ªÂéüÂõ†Ôºö${getSystemAutopsyDesc(cell.emoji)}`, 'autopsy-log');
                } else if (index === playerAutopsy) {
                    addLog(`‰Ω†ÂèëÁé∞‰∫ÜËá™Â∑±ÁöÑÂ∞∏Ê£ÄÊä•Âëä${cell.emoji}ÔºÅËá¥Ê≠ªÂéüÂõ†Ôºö${autopsyDescElement.value}`, 'autopsy-log');
                }
                
                // Á≥ªÁªüÂõûÂêàÔºàÂª∂ËøüÊâßË°åÔºâ
                if (gameState === 'playing') {
                    gameStatusElement.textContent = "Á≥ªÁªüÊ≠£Âú®ÊÄùËÄÉ...";
                    setTimeout(systemTurn, 2000);
                }
            }
        }
        
        // Á≥ªÁªüÂõûÂêà
        function systemTurn() {
            if (gameState !== 'playing') return;
            
            // ÊâæÂà∞ÊâÄÊúâÊú™Êè≠Á§∫ÁöÑÊ†ºÂ≠ê
            const availableCells = cells.filter(cell => 
                !cell.revealed && 
                cell.index !== systemDeath && 
                cell.index !== systemAutopsy
            );
            
            if (availableCells.length === 0) {
                endGame(true, "ÊâÄÊúâÊùêÊñôÈÉΩÂ∑≤Ê£ÄÊü•ÂÆåÊØïÔºåÊó†‰∫∫‰∏≠ÊØíÔºÅ");
                return;
            }
            
            // ÈöèÊú∫ÈÄâÊã©‰∏Ä‰∏™Ê†ºÂ≠ê
            const randomIndex = Math.floor(Math.random() * availableCells.length);
            const cellIndex = availableCells[randomIndex].index;
            const cell = cells[cellIndex];
            
            revealCell(cellIndex, 'system');
            playerTurn = true;
            gameStatusElement.textContent = "ËΩÆÂà∞‰Ω†‰∫ÜÔºåÂ∞èÂøÉÈÄâÊã©...";
            
            // ÁîüÊàêÁ≥ªÁªüË°åÂä®ÊèèËø∞
            const action = getSystemAction(cell.emoji);
            addLog(action, 'system-log');
            
            // Ê£ÄÊü•Á≥ªÁªüÈÄâÊã©ÁöÑÊ†ºÂ≠ê
            if (cellIndex === playerDeath) {
                endGame(true, `Á≥ªÁªüËØØËß¶‰∫Ü‰Ω†ÁöÑÊ≠ªÊ≥ï${cell.emoji}Ôºå‰Ω†Ëé∑Âæó‰∫ÜËÉúÂà©ÔºÅÊ≠ªÊ≥ïÔºö${deathDescElement.value}`);
            } else if (cellIndex === playerAutopsy) {
                addLog(`Á≥ªÁªüÂèëÁé∞‰∫Ü‰Ω†ÁöÑÂ∞∏Ê£ÄÊä•Âëä${cell.emoji}ÔºÅËá¥Ê≠ªÂéüÂõ†Ôºö${autopsyDescElement.value}`, 'autopsy-log');
            } else if (cellIndex === systemAutopsy) {
                addLog(`Á≥ªÁªüÂèëÁé∞‰∫ÜËá™Â∑±ÁöÑÂ∞∏Ê£ÄÊä•Âëä${cell.emoji}ÔºÅËá¥Ê≠ªÂéüÂõ†Ôºö${getSystemAutopsyDesc(cell.emoji)}`, 'autopsy-log');
            }
        }
        
        // Êè≠Á§∫Ê†ºÂ≠ê
        function revealCell(index, by) {
            const cell = cells[index];
            cell.revealed = true;
            cell.revealedBy = by;
            cell.element.classList.add('revealed');
            
            // ÁßªÈô§ÈÄâÊã©Ê†áËÆ∞
            cell.element.classList.remove('death-selected', 'autopsy-selected');
            
            // Ê∑ªÂä†Ë°åÂä®Ê†áËÆ∞
            if (by === 'player') {
                cell.element.classList.add('player-move');
            } else {
                cell.element.classList.add('system-move');
            }
            
            cell.element.style.cursor = 'default';
        }
        
        // Áé©ÂÆ∂Ë°åÂä®ÊèèËø∞ÁîüÊàê
        function getPlayerAction(emoji) {
            const actions = {
                'üè¶': "Ëµ∞ËøõÈì∂Ë°åÂáÜÂ§áÂèñÈí±ÔºåÂèëÁé∞Èì∂Ë°åÂç°Â§™‰πÖ‰∏ç‰ΩøÁî®ÔºåË¢´ÂÜªÁªì‰∫Ü...",
                'üîÆ': "‰ªäÂ§©ÂéªÈÄõÂ∏ÇÈõÜÔºåÊâæÂ•≥Â∑´ÁÆó‰∫Ü‰∏ÄÂç¶",
                '‚õ©': "Âú®Á•ûÁ§æËÆ∏ÊÑøÔºöÂ∏åÊúõÊòéÂ§©‰∏çË¶Å‰∏ãÈõ®ÔºÅ",
                'üö≤': "‰ªäÂ§©Êó©‰∏äÈÄöÂã§ÁöÑÂÖ±‰∫´ÂçïËΩ¶ÔºåÂùêÂû´ËøòÊå∫ËàíÊúçÔΩû",
                '‚ôü': "ËÑëÊµ∑‰∏≠ÊµÆÁé∞Âá∫ÁΩóÊÅ©Âú®Â∑´Â∏àÊ£ãÂ§ßÊàò‰∏≠‰∏∫‰ºô‰º¥Áâ∫Áâ≤ÁöÑÂ¥áÈ´òÁîªÈù¢ÔºåÂò§Âò§Âò§",
                'üéÆ': "Â§èÂ§©Êù•‰∫ÜÔºåÊàëÊÉ≥Áé©ÁßçËèúÊ∏∏ÊàèÂë¢ÔºåÂìàÂìàÂìàÂìà",
                'üé±': "ÊïôÁªÉÔºÅÊàëÊÉ≥ÊâìÂè∞ÁêÉÔºÅÔºÅÔºÅ",
                'ü•Æ': "Á™ÅÁÑ∂ÊúâÁÇπÊÉ≥ÂêÉ‰∫î‰ªÅÊúàÈ•ºÔΩû",
                '‚ùÑ': "Â†Ü‰∏™Èõ™‰∫∫ÂêßÔºÅËÉ°ËêùÂçúÂΩìÈºªÂ≠êÊúÄÂêàÈÄÇ‰∫ÜÔºÅ",
                'üê°': "Ê≤≥Ë±öÂà∫Ë∫´ÁúãËµ∑Êù•ÂæàÁæéÂë≥Ôºå‰ΩÜ‰ºö‰∏ç‰ºöÊúâÊØíÂë¢Ôºü",
                'ü¶ã': "Ëù¥Ëù∂ÊïàÂ∫îÔºåÂ•ΩÊÅêÊÄñÁöÑerÔΩû",
                'üëô': "Ëøô‰ª∂Ê≥≥Ë£ÖÁúüÂ•ΩÁúãÔºå‰ΩÜ‰ª∑Ê†º‰πüÂ§™Ë¥µ‰∫ÜÂêßÔºÅ",
                'üìö': "ËøôÊú¨‰π¶ÁúüÂéöÔºå‰ªÄ‰πàÊó∂ÂÄôÊâçËÉΩËØªÂÆåÂïäÔºü",
                'üõè': "ËøôÂº†Â∫äÂ•ΩËàíÊúçÔºåÁúüÊÉ≥ÂÜçÁù°‰∫îÂàÜÈíü...",
                'üõÅ': "Ê≥°‰∏™ÁÉ≠Ê∞¥Êæ°ÔºåÊîæÁÇπÁé´Áë∞Ëä±Áì£ÔΩû",
                'üßª': "ÂøΩÁÑ∂ÊúâÁÇπÂ±éÊÑèÁõéÁÑ∂...",
                'üß¨': "Á†îÁ©∂DNAÁªìÊûÑÔºåÂèëÁé∞‰∏Ä‰∏™ÊúâË∂£ÁöÑÁé∞Ë±°ÔºÅ",
                'üî´': "Ê∞¥Êû™Â§ßÊàòÂºÄÂßãÔºÅÁúãÊàëÁöÑÂéâÂÆ≥ÔºÅ",
                'üíø': "ÊãøÂá∫‰∫Ü‰∏ÄÂº†‰∫ÆÈó™Èó™ÁöÑÂÖâÁõòÔºåÂèëÁé∞ÊàëÁöÑÁîµËÑëÊ≤°ÊúâÂÖâÈ©±ÔΩûÔΩûÔΩû",
                'üì∑': "Ëá™ÊãçÊó∂Èó¥ÔºÅÊâæ‰∏™Â•ΩËßíÂ∫¶ÔΩû",
                'üñ•': "ÂèàÂÜô‰∫Ü‰∏ÄÂ§©‰ª£Á†ÅÔºåÁúºÁùõÂ•ΩÈÖ∏...",
                'üèñ': "ÊúâÁöÑÊó∂ÂÄô‰πüÊÉ≥ÂéªÊêûÊêûÂ∫¶ÂÅáÔºÅÔºÅÔºÅ",
                'üßä': "ÊÉÖÁª™Êù•‰∫ÜÔºåÂÅö‰∫Ü‰∏ÄÊùØË±™ÂçéÂÜ∞ÈïáËúúÊ°ÉÊ∞îÊ≥°Ê∞¥",
                'üéª': "ÁªÉ‰π†Â∞èÊèêÁê¥ÔºåÈÇªÂ±ÖÂèàÊù•Êï≤Èó®‰∫Ü...",
                'üç∑': "ÊúÄËøëÊúâÁÇπÊÉ≥ÂñùÂ∞èÈÖíÔΩû",
                'üß™': "Ë∞ÉÂà∂Á•ûÁßòËçØÊ∞¥ÔºåÂ∏åÊúõ‰∏çË¶ÅÁàÜÁÇ∏...",
                '‚ò†Ô∏è': "È™∑È´ÖÂ§¥È°πÈìæÔºåÊà¥‰∏äÂÆÉÊòæÂæóÂæàÈÖ∑ÔºÅ",
                'üï∑Ô∏è': "ËúòËõõ‰æ†ÔºÅÊàë‰πüÊÉ≥Êã•ÊúâË∂ÖËÉΩÂäõÔºÅ",
                'ü¶á': "ËùôËù†‰æ†ÁöÑË£ÖÂ§áÁúüÂ∏ÖÔºåÊàë‰πüÊÉ≥Ë¶ÅÔºÅ",
                'üçé': "ÁôΩÈõ™ÂÖ¨‰∏ªÁöÑÊØíËãπÊûúÔºüÁúãËµ∑Êù•ÂæàÂ•ΩÂêÉÔºÅ",
                'üçÑ': "Ëøô‰∏™ËòëËèáÂ•ΩÊºÇ‰∫ÆÔºå‰ΩÜ‰∏çÁü•ÈÅìËÉΩ‰∏çËÉΩÂêÉ...",
                'üåø': "Ëøô‰∫õËçâËçØËÉΩÊ≤ªÊÑüÂÜíÂêóÔºüËØïËØïÁúãÔºÅ",
                'üêç': "ËõáÁöÑÁßªÂä®ÊñπÂºèÁúüÁ•ûÂ•áÔºÅ",
                'üïØÔ∏è': "ÁÉõÂÖâÊôöÈ§êÔºåÊ∞îÊ∞õÊª°ÂàÜÔºÅ",
                '‚öóÔ∏è': "ÂåñÂ≠¶ÂÆûÈ™åÔºåÂ∏åÊúõ‰∏çË¶ÅÂá∫‰∫ãÊïÖ..."
            };
            
            return actions[emoji] || `‰Ω†‰ªîÁªÜÁ†îÁ©∂‰∫Ü${emoji}ÔºåÂèëÁé∞‰∫Ü‰∏Ä‰∫õÊúâË∂£ÁöÑ‰∏úË•ø...`;
        }
        
        // Á≥ªÁªüË°åÂä®ÊèèËø∞ÁîüÊàê
        function getSystemAction(emoji) {
            const actions = {
                'üè¶': "Á≥ªÁªüÊ≠£Âú®ÂàÜÊûêÈì∂Ë°åÂÆâÂÖ®Á≥ªÁªü...",
                'üîÆ': "Á≥ªÁªüÈ¢ÑÊµãÊòéÂ§©ÁöÑÂ§©Ê∞î‰ºöÊòØÊô¥Â§©ÔºÅ",
                '‚õ©': "Á≥ªÁªüËØÑ‰º∞Á•ûÁ§æÂª∫Á≠ëÁªìÊûÑÁöÑÁ®≥ÂÆöÊÄß...",
                'üö≤': "Á≥ªÁªüËÆ°ÁÆóËá™Ë°åËΩ¶ÁöÑÊúÄ‰Ω≥Ë°åÈ©∂Ë∑ØÁ∫ø...",
                '‚ôü': "Á≥ªÁªüÊÄùËÄÉÊ£ãÂ±ÄÔºåÂáÜÂ§á‰∏ã‰∏ÄÊ≠•Â∞ÜÂÜõÔºÅ",
                'üéÆ': "Á≥ªÁªüÂêØÂä®Ê∏∏ÊàèÁ®ãÂ∫èÔºåÂáÜÂ§áÂ§ßÊùÄÂõõÊñπÔºÅ",
                'üé±': "Á≥ªÁªüËÆ°ÁÆóÂè∞ÁêÉÁöÑËßíÂ∫¶ÂíåÂäõÂ∫¶...",
                'ü•Æ': "Á≥ªÁªüÂàÜÊûêÊúàÈ•ºÁöÑËê•ÂÖªÊàêÂàÜ...",
                '‚ùÑ': "Á≥ªÁªüÊµãÈáèÈõ™ÁöÑÊ∏©Â∫¶ÂíåÂØÜÂ∫¶...",
                'üê°': "Á≥ªÁªüÊ£ÄÊµãÊ≤≥Ë±öÁöÑÊØíÊÄßÁ≠âÁ∫ß...",
                'ü¶ã': "Á≥ªÁªüËÆ∞ÂΩïËù¥Ëù∂ÁöÑÈ£ûË°åËΩ®Ëøπ...",
                'üëô': "Á≥ªÁªüËØÑ‰º∞Ê≥≥Ë£ÖÁöÑÊùêÊñôÂíåËÆæËÆ°...",
                'üìö': "Á≥ªÁªüÊâ´Êèè‰π¶Á±çÂÜÖÂÆπÔºåÂª∫Á´ãÁ¥¢Âºï...",
                'üõè': "Á≥ªÁªüÊµãËØïÂ∫äÂû´ÁöÑËàíÈÄÇÂ∫¶...",
                'üõÅ': "Á≥ªÁªüË∞ÉËäÇÊ∞¥Ê∏©Ëá≥ÊúÄ‰Ω≥Ê≥°Êæ°Ê∏©Â∫¶...",
                'üßª': "Á≥ªÁªüËÆ°ÁÆóÂéïÁ∫∏ÁöÑ‰ΩøÁî®ÂØøÂëΩ...",
                'üß¨': "Á≥ªÁªüËß£Á†ÅDNAÂ∫èÂàó...",
                'üî´': "Á≥ªÁªüÊ†°ÂáÜÊ∞¥Êû™ÁöÑÂ∞ÑÁ®ã...",
                'üíø': "Á≥ªÁªüËØªÂèñÂÖâÁõòÊï∞ÊçÆÔºåËøõÂ∫¶50%...",
                'üì∑': "Á≥ªÁªüË∞ÉÊï¥Áõ∏Êú∫ÂèÇÊï∞ÔºåÂáÜÂ§áÊãçÁÖß...",
                'üñ•': "Á≥ªÁªü‰ºòÂåñ‰ª£Á†ÅÔºåÊèêÂçáËøêË°åÊïàÁéá...",
                'üèñ': "Á≥ªÁªüÁõëÊµãÁ¥´Â§ñÁ∫øÂº∫Â∫¶ÔºåÂª∫ËÆÆ‰ΩøÁî®Èò≤ÊôíÈúú...",
                'üßä': "Á≥ªÁªüËÆ°ÁÆóÂÜ∞ÂùóÁöÑËûçÂåñÈÄüÂ∫¶...",
                'üéª': "Á≥ªÁªüË∞ÉÈü≥ÔºåÂáÜÂ§áÊºîÂ•èÂ∞èÂ§úÊõ≤...",
                'üç∑': "Á≥ªÁªüÂàÜÊûêÁ∫¢ÈÖíÁöÑÂπ¥‰ªΩÂíå‰∫ßÂú∞...",
                'üß™': "Á≥ªÁªüÊ∑∑ÂêàÂåñÂ≠¶ËØïÂâÇÔºåÂèçÂ∫î‰∏≠...",
                '‚ò†Ô∏è': "Á≥ªÁªüÂàÜÊûêÈ™∑È´ÖÂ§¥ÁöÑÁªìÊûÑ...",
                'üï∑Ô∏è': "Á≥ªÁªüÁ†îÁ©∂ËúòËõõÁöÑÁªìÁΩëÊ®°Âºè...",
                'ü¶á': "Á≥ªÁªüËøΩË∏™ËùôËù†ÁöÑÂ£∞Ê≥¢‰ø°Âè∑...",
                'üçé': "Á≥ªÁªüÊ£ÄÊµãËãπÊûúÁöÑÂÜúËçØÊÆãÁïô...",
                'üçÑ': "Á≥ªÁªüÂàÜÁ±ªËòëËèáÁßçÁ±ªÔºåÊúâÊØí/Êó†ÊØí...",
                'üåø': "Á≥ªÁªüÊèêÂèñËçâËçØ‰∏≠ÁöÑÊúâÊïàÊàêÂàÜ...",
                'üêç': "Á≥ªÁªüÁ†îÁ©∂ËõáÁöÑËøêÂä®Ê®°Âºè...",
                'üïØÔ∏è': "Á≥ªÁªüÊµãÈáèËú°ÁÉõÁöÑÁáÉÁÉßÈÄüÂ∫¶...",
                '‚öóÔ∏è': "Á≥ªÁªüËøõË°åÂåñÂ≠¶ÂÆûÈ™åÔºåÁîüÊàêÊä•Âëä..."
            };
            
            return actions[emoji] || `Á≥ªÁªüÊ≠£Âú®Á†îÁ©∂${emoji}...`;
        }
        
        // Á≥ªÁªüÊ≠ªÊ≥ïÊèèËø∞ÁîüÊàêÔºàÂü∫‰∫éemojiÔºâ
        function getSystemDeathDesc(emoji) {
            const descriptions = {
                'üè¶': "ÂéªÈì∂Ë°åÂèñÈí±Êó∂ÈÅáÂà∞Êä¢Âä´ÔºåË¢´Âä´Âå™ÂΩì‰Ωú‰∫∫Ë¥®ÔºåÊúÄÂêéË¢´Ë≠¶ÂØüËØØ‰º§„ÄÇ",
                'üîÆ': "ÂÅ∑ÁúãÂ•≥Â∑´ÁöÑÊ∞¥Êô∂ÁêÉÊó∂ÔºåË¢´Êú™Êù•ÁöÑËá™Â∑±ÂêìÂà∞ÂøÉËÑèÁóÖÂèë‰Ωú„ÄÇ",
                '‚õ©': "Âú®Á•ûÁ§æÁ•àÁ¶èÊó∂ÔºåË¢´ÊéâËêΩÁöÑËÆ∏ÊÑøÁâåÁ†∏‰∏≠Â§¥ÈÉ®„ÄÇ",
                'üö≤': "È™ëËá™Ë°åËΩ¶‰∏ãÂù°Êó∂ÂàπËΩ¶Â§±ÁÅµÔºåÊíû‰∏äÂÜ∞Ê∑áÊ∑ãËΩ¶„ÄÇ",
                '‚ôü': "ÂèÇÂä†ÂõΩÈôÖË±°Ê£ãÈî¶Ê†áËµõÊó∂ÔºåË¢´ÂØπÊâãÁî®Ê£ãÂ≠êÂáª‰∏≠Â§™Èò≥Á©¥„ÄÇ",
                'üéÆ': "ËøûÁª≠Ê∏∏Êàè72Â∞èÊó∂ÂêéÔºåË¢´ËôöÊãüÊÄ™Áâ©ÂêìÂà∞ÂøÉËÑèÈ™§ÂÅú„ÄÇ",
                'üé±': "Âú®Âè∞ÁêÉÊØîËµõ‰∏≠ÔºåË¢´ÂØπÊâãÁî®ÂÖ´Âè∑ÁêÉÂáª‰∏≠Ë¶ÅÂÆ≥„ÄÇ",
                'ü•Æ': "ÂêÉÊúàÈ•ºÊó∂Ë¢´ÈáåÈù¢ÁöÑÈáëÂùóÂç°‰ΩèÂñâÂíôÁ™íÊÅØ„ÄÇ",
                '‚ùÑ': "Âú®ÂÜ∞Èõ™Â§ß‰∏ñÁïåÁé©ËÄçÁöÑÊó∂ÂÄôÔºå‰∏çÂ∞èÂøÉÊíûÂà∞‰∫ÜÈõ™ÁéãÊÄÄÈáåÔºåËàåÂ§¥ÂÜªÂú®‰∫ÜÈõ™ÁéãÁöÑÁîúÁ≠íÊùÉÊùñ‰∏ä„ÄÇ",
                'üê°': "Â∞ùËØïÂêÉÊ≤≥Ë±öÂà∫Ë∫´ÔºåÂé®Â∏àÂ§ÑÁêÜ‰∏çÂΩìÂØºËá¥‰∏≠ÊØí„ÄÇ",
                'ü¶ã': "È™ëËá™Ë°åËΩ¶ÂéªÂú∞ÈìÅÁ´ôÁöÑË∑Ø‰∏äÔºåÂê∏ÂÖ•‰∫ÜËù¥Ëù∂ÊäñËêΩÁöÑËä±Á≤âËøáÊïèÔºåÂú®ËΩ¨ÂºØÂ§ÑÁøªËΩ¶ÔºåÂõ†ËΩ¶Á•∏ËÄåÊ≠ª„ÄÇ",
                'üëô': "Ê∏∏Ê≥≥ÁöÑÊó∂ÂÄôÔºåË¢´ÁÜäÂ≠©Â≠êË∂ÖÂ§ßÂäõÂú∞Ë∏π‰∏≠ÔºåÂÜÖËÑèÁ†¥Ë£ÇÔºå‰∏çÊ≤ªË∫´‰∫°„ÄÇ",
                'üìö': "Âú®Âõæ‰π¶È¶ÜÁúã‰π¶Êó∂ÔºåË¢´ÂÄíÂ°åÁöÑ‰π¶Êû∂Á†∏‰∏≠„ÄÇ",
                'üõè': "Âú®Â∫ä‰∏äË∑≥Ëπ¶Â∫äÊó∂ÔºåÊíû‰∏äÂ§©Ëä±ÊùøÂêäÁÅØ„ÄÇ",
                'üõÅ': "Ê≥°Êæ°Êó∂Áù°ÁùÄÔºåÊ∑πÊ≠ªÂú®Êµ¥Áº∏Èáå„ÄÇ",
                'üßª': "‰∏äÂéïÊâÄÊó∂Ë∏©Âà∞Âú∞‰∏äÁöÑÊπøÁ∫∏Â∑æÊëîÊ≠ª„ÄÇ",
                'üß¨': "ÂÅöDNAÂÆûÈ™åÊó∂ÔºåË¢´Á™ÅÂèòÁªÜËèåÊÑüÊüì„ÄÇ",
                'üî´': "Áé©Ê∞¥Êû™Êó∂ÔºåË¢´ËØØËÆ§‰∏∫ÊòØÁúüÊû™ËÄåÈÅ≠Â∞ÑÂáª„ÄÇ",
                'üíø': "Âê¨CDÊó∂Ë¢´È£ûÂá∫ÁöÑÂÖâÁõòÂàí‰º§Âä®ËÑâ„ÄÇ",
                'üì∑': "Ëá™ÊãçÊó∂Ë¢´Èó™ÁîµÂáª‰∏≠„ÄÇ",
                'üñ•': "Áî®ÁîµËÑëÊó∂Ë¢´ÈªëÂÆ¢ÂÖ•‰æµÂøÉËÑèËµ∑ÊêèÂô®„ÄÇ",
                'üèñ': "Âú®Ê≤ôÊª©ÊôíÂ§™Èò≥Êó∂Ë¢´ÂØÑÂ±ÖËüπÈíªËøõËÄ≥Êúµ„ÄÇ",
                'üßä': "ÂêÉÂÜ∞ÂùóÊó∂Ë¢´ÂÜª‰ΩèËàåÂ§¥Á™íÊÅØ„ÄÇ",
                'üéª': "ÊãâÂ∞èÊèêÁê¥Êó∂Áê¥Âº¶Êñ≠Ë£ÇÂâ≤Âñâ„ÄÇ",
                'üç∑': "ÂñùÁ∫¢ÈÖíÊó∂Ë¢´ÈÖíÁì∂Â°ûÂ≠êÂôé‰Ωè„ÄÇ",
                'üß™': "Ë∞ÉÂà∂È≠îËçØÊó∂ÂèëÁîüÁàÜÁÇ∏ÔºåË¢´ÁªøËâ≤Ê∂≤‰ΩìÊ∫∂Ëß£„ÄÇ",
                '‚ò†Ô∏è': "Êà¥ÁùÄÈ™∑È´ÖÂ§¥È°πÈìæÁù°ËßâÔºåË¢´ËØÖÂííËÄåÊ≠ª„ÄÇ",
                'üï∑Ô∏è': "Ë¢´ÂâßÊØíËúòËõõÂí¨‰º§ÔºåÂÖ®Ë∫´Ê∫ÉÁÉÇËÄå‰∫°„ÄÇ",
                'ü¶á': "Ë¢´Âê∏Ë°ÄËùôËù†Áæ§Ë¢≠ÂáªÔºåÂ§±Ë°ÄËøáÂ§ö„ÄÇ",
                'üçé': "ÂêÉ‰∫Ü‰∏ÄÂè£ÊØíËãπÊûúÔºåÂÉèÁôΩÈõ™ÂÖ¨‰∏ª‰∏ÄÊ†∑ÈïøÁú†‰∏çÈÜí„ÄÇ",
                'üçÑ': "ËØØÈ£üÊØíËòëËèáÔºå‰∫ßÁîüÂπªËßâË∑≥‰∏ãÊÇ¨Â¥ñ„ÄÇ",
                'üåø': "ÂêÉËçâËçØËøáÈáèÔºåÂèòÊàê‰∫Ü‰∏ÄÊ†™Ê§çÁâ©„ÄÇ",
                'üêç': "Ë¢´ÊØíËõáÂí¨‰º§ÔºåÊØíÂèëË∫´‰∫°„ÄÇ",
                'üïØÔ∏è': "Âú®ÁÉõÂÖâÊôöÈ§êÊó∂ÔºåÂ§¥ÂèëË¢´ÁÇπÁáÉ„ÄÇ",
                '‚öóÔ∏è': "ÂåñÂ≠¶ÂÆûÈ™åÂá∫ÈîôÔºåË¢´Á¥´Ëâ≤ÁÉüÈõæÊØíÊ≠ª„ÄÇ"
            };
            
            return descriptions[emoji] || `Âú®‰ΩøÁî®${emoji}Êó∂ÂèëÁîü‰∫ÜÊÑèÂ§ñÔºå‰∏çÂπ∏Ë∫´‰∫°„ÄÇ`;
        }
        
        // Á≥ªÁªüÂ∞∏Ê£ÄÊä•ÂëäÊèèËø∞ÁîüÊàêÔºàÂü∫‰∫éemojiÔºâ
        function getSystemAutopsyDesc(emoji) {
            const descriptions = {
                'üè¶': "Ê≠ªËÄÖÊ≠ª‰∫éÂ§öÂ§ÑÊû™‰º§„ÄÇ",
                'üîÆ': "Ê≠ªËÄÖÊ≠ª‰∫éÂøÉËÑèÁóÖÂèë‰Ωú„ÄÇ",
                '‚õ©': "Ê≠ªËÄÖÊ≠ª‰∫éÈ¢ÖËÑëÊçü‰º§„ÄÇ",
                'üö≤': "Ê≠ªËÄÖÊ≠ª‰∫éÂ§öÂ§ÑÈ™®ÊäòÂíåÂÜÖËÑèÁ†¥Ë£Ç„ÄÇ",
                '‚ôü': "Ê≠ªËÄÖÊ≠ª‰∫éÂ§™Èò≥Á©¥ÂèóÂà∞ÈáçÂáª„ÄÇ",
                'üéÆ': "Ê≠ªËÄÖÊ≠ª‰∫éÂøÉËÑèÈ™§ÂÅú„ÄÇ",
                'üé±': "Ê≠ªËÄÖÊ≠ª‰∫éÈíùÂô®ÂáªÊâìË¶ÅÂÆ≥„ÄÇ",
                'ü•Æ': "Ê≠ªËÄÖÊ≠ª‰∫éÂëºÂê∏ÈÅìÈòªÂ°û„ÄÇ",
                '‚ùÑ': "Ê≠ªËÄÖÊ≠ª‰∫éÁ™íÊÅØÂíå‰ΩéÊ∏©Áóá„ÄÇ",
                'üê°': "Ê≠ªËÄÖÊ≠ª‰∫éÊ≤≥Ë±öÊØíÁ¥†„ÄÇ",
                'ü¶ã': "Ê≠ªËÄÖÊ≠ª‰∫éÈ´òÂ§ÑÂù†ËêΩ„ÄÇ",
                'üëô': "Ê≠ªËÄÖÊ≠ª‰∫éÊ∫∫Ê∞¥„ÄÇ",
                'üìö': "Ê≠ªËÄÖÊ≠ª‰∫éÈ¢ÖËÑëÊçü‰º§ÂíåÈ¢àÊ§éÊñ≠Ë£Ç„ÄÇ",
                'üõè': "Ê≠ªËÄÖÊ≠ª‰∫éÁîµÂáª‰º§„ÄÇ",
                'üõÅ': "Ê≠ªËÄÖÊ≠ª‰∫éÊ∫∫Ê∞¥„ÄÇ",
                'üßª': "Ê≠ªËÄÖÊ≠ª‰∫éÂ§¥ÈÉ®Èáç‰º§„ÄÇ",
                'üß¨': "Ê≠ªËÄÖÊ≠ª‰∫éÁªÜËèåÊÑüÊüì„ÄÇ",
                'üî´': "Ê≠ªËÄÖÊ≠ª‰∫éÊû™‰º§„ÄÇ",
                'üíø': "Ê≠ªËÄÖÊ≠ª‰∫éÂä®ËÑâÁ†¥Ë£Ç„ÄÇ",
                'üì∑': "Ê≠ªËÄÖÊ≠ª‰∫éÁîµÂáª‰º§„ÄÇ",
                'üñ•': "Ê≠ªËÄÖÊ≠ª‰∫éÂøÉËÑèËµ∑ÊêèÂô®ÊïÖÈöú„ÄÇ",
                'üèñ': "Ê≠ªËÄÖÊ≠ª‰∫éËÑëÈÉ®ÂØÑÁîüËô´ÊÑüÊüì„ÄÇ",
                'üßä': "Ê≠ªËÄÖÊ≠ª‰∫éÁ™íÊÅØ„ÄÇ",
                'üéª': "Ê≠ªËÄÖÊ≠ª‰∫éÈ¢àÂä®ËÑâÁ†¥Ë£Ç„ÄÇ",
                'üç∑': "Ê≠ªËÄÖÊ≠ª‰∫éÂëºÂê∏ÈÅìÈòªÂ°û„ÄÇ",
                'üß™': "Ê≠ªËÄÖÊ≠ª‰∫éÂåñÂ≠¶‰∏≠ÊØí„ÄÇ",
                '‚ò†Ô∏è': "Ê≠ªËÄÖÊ≠ª‰∫é‰∏çÊòéËØÖÂíí„ÄÇ",
                'üï∑Ô∏è': "Ê≠ªËÄÖÊ≠ª‰∫éÁ•ûÁªèÊØíÁ¥†„ÄÇ",
                'ü¶á': "Ê≠ªËÄÖÊ≠ª‰∫éÂ§±Ë°ÄËøáÂ§ö„ÄÇ",
                'üçé': "Ê≠ªËÄÖÊ≠ª‰∫éÊ∞∞ÂåñÁâ©‰∏≠ÊØí„ÄÇ",
                'üçÑ': "Ê≠ªËÄÖÊ≠ª‰∫éÂπªËßâÂØºËá¥ÁöÑËá™‰º§„ÄÇ",
                'üåø': "Ê≠ªËÄÖÊ≠ª‰∫éÊ§çÁâ©ÊØíÁ¥†„ÄÇ",
                'üêç': "Ê≠ªËÄÖÊ≠ª‰∫éËõáÊØí„ÄÇ",
                'üïØÔ∏è': "Ê≠ªËÄÖÊ≠ª‰∫éÁÉß‰º§„ÄÇ",
                '‚öóÔ∏è': "Ê≠ªËÄÖÊ≠ª‰∫éÂåñÂ≠¶‰∏≠ÊØí„ÄÇ"
            };
            
            return descriptions[emoji] || `Ê≠ªËÄÖÂú®‰ΩøÁî®${emoji}Êó∂ÂèëÁîüÊÑèÂ§ñË∫´‰∫°„ÄÇ`;
        }
        
        // Ê∑ªÂä†Êó•Âøó
        function addLog(message, className) {
            logEntries.push({ message, className });
            if (logEntries.length > 20) logEntries.shift();
            updateLog();
        }
        
        // Êõ¥Êñ∞Êó•Âøó
        function updateLog() {
            logEntriesElement.innerHTML = '';
            logEntries.forEach(entry => {
                const logEntry = document.createElement('div');
                logEntry.className = `log-entry ${entry.className}`;
                
                const icon = document.createElement('span');
                icon.style.marginRight = '10px';
                
                if (entry.className === 'player-log') {
                    icon.innerHTML = '<i class="fas fa-user"></i>';
                } else if (entry.className === 'system-log') {
                    icon.innerHTML = '<i class="fas fa-robot"></i>';
                } else {
                    icon.innerHTML = '<i class="fas fa-file-medical"></i>';
                }
                
                logEntry.appendChild(icon);
                logEntry.appendChild(document.createTextNode(entry.message));
                logEntriesElement.appendChild(logEntry);
            });
            logEntriesElement.scrollTop = logEntriesElement.scrollHeight;
        }
        
        // ÁªìÊùüÊ∏∏Êàè
        function endGame(isWin, message) {
            gameState = 'ended';
            
            if (isWin) {
                deathMessageElement.textContent = "‰Ω†Ëµ¢‰∫ÜÔºÅüéâ";
                deathMessageElement.style.color = "#4caf50";
            } else {
                deathMessageElement.textContent = "‰Ω†Ê≠ª‰∫ÜÔºÅüíÄ";
                deathMessageElement.style.color = "#ff6b6b";
            }
            
            deathReasonElement.textContent = message;
            deathScreenElement.style.display = "flex";
            
            // Êè≠Á§∫ÊâÄÊúâÁ≥ªÁªüÈÄâÊã©
            if (systemDeath !== null) {
                revealCell(systemDeath, 'system');
            }
            if (systemAutopsy !== null) {
                revealCell(systemAutopsy, 'system');
            }
        }
        
        // Á≥ªÁªüÈöèÊú∫ÈÄâÊã©‰ΩçÁΩÆ
        function makeSystemSelections() {
            // Á≥ªÁªüÈÄâÊã©Ê≠ªÊ≥ï‰ΩçÁΩÆÔºàÈÅøÂºÄÁé©ÂÆ∂ÈÄâÊã©Ôºâ
            let availableCells = cells
                .map((_, i) => i)
                .filter(i => i !== playerDeath && i !== playerAutopsy);
            
            systemDeath = availableCells[Math.floor(Math.random() * availableCells.length)];
            availableCells = availableCells.filter(i => i !== systemDeath);
            systemAutopsy = availableCells[Math.floor(Math.random() * availableCells.length)];
            
            addLog("Á≥ªÁªüÂ∑≤ÁßòÂØÜÂ∏ÉÁΩÆÂ•ΩÊ≠ªÊ≥ïÂíåÂ∞∏Ê£ÄÊä•Âëä‰ΩçÁΩÆ...", 'system-log');
            addLog("Ê∏∏ÊàèÂºÄÂßãÔºÅËΩÆÂà∞‰Ω†Ë°åÂä®ÔºåÂ∞èÂøÉÈÄâÊã©...", 'system-log');
        }
        
        // ‰∫ã‰ª∂ÁõëÂê¨Âô®
        startBtnElement.addEventListener('click', () => {
            if (!deathEmojiElement.value || !autopsyEmojiElement.value) {
                alert("ËØ∑ÈÄâÊã©Ê≠ªÊ≥ïÂíåÂ∞∏Ê£ÄÊä•Âëä‰ΩçÁΩÆÔºÅ");
                return;
            }
            
            playerDeath = parseInt(deathEmojiElement.value);
            playerAutopsy = parseInt(autopsyEmojiElement.value);
            
            if (!deathDescElement.value || !autopsyDescElement.value) {
                alert("ËØ∑Â°´ÂÜôÊ≠ª‰∫°Âú∫ÊôØÂíåÂ∞∏Ê£ÄÊä•ÂëäÊèèËø∞ÔºÅ");
                return;
            }
            
            if (playerDeath === playerAutopsy) {
                alert("Ê≠ªÊ≥ïÂíåÂ∞∏Ê£ÄÊä•Âëä‰ΩçÁΩÆ‰∏çËÉΩÁõ∏ÂêåÔºÅ");
                return;
            }
            
            gameState = 'playing';
            makeSystemSelections();
            gameStatusElement.textContent = "Ê∏∏ÊàèÂºÄÂßãÔºÅËΩÆÂà∞‰Ω†Ë°åÂä®...";
            startBtnElement.disabled = true;
            
            // Ê†áËÆ∞Áé©ÂÆ∂ÈÄâÊã©ÁöÑ‰ΩçÁΩÆ
            cells[playerDeath].element.classList.add('death-selected');
            cells[playerAutopsy].element.classList.add('autopsy-selected');
        });
        
        resetBtnElement.addEventListener('click', initGame);
        playAgainBtnElement.addEventListener('click', initGame);
        
        // ÂàùÂßãÂåñÊ∏∏Êàè
        initGame();
    </script>
</body>
</html>
