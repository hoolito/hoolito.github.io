<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å¥³å·«çš„æ¯’è¯ - è¶…çº§ä¾¦æ¢</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            color: #e6e6e6;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
            position: relative;
            overflow-x: hidden;
        }
        
        body::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="100" height="100" viewBox="0 0 100 100"><path d="M0,0 L100,100 M100,0 L0,100" stroke="rgba(90,0,180,0.1)" stroke-width="1"/></svg>');
            opacity: 0.3;
            z-index: -1;
        }
        
        .header {
            text-align: center;
            margin: 20px 0 30px;
            width: 100%;
            max-width: 800px;
        }
        
        h1 {
            font-size: 2.8rem;
            margin-bottom: 10px;
            background: linear-gradient(45deg, #ff6b6b, #ff8e53, #ff6b6b);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            text-shadow: 0 0 15px rgba(255, 107, 107, 0.4);
            letter-spacing: 2px;
        }
        
        .subtitle {
            font-size: 1.2rem;
            color: #a0a0c0;
            margin-bottom: 15px;
        }
        
        .game-container {
            display: flex;
            flex-direction: column;
            width: 100%;
            max-width: 1200px;
            gap: 25px;
        }
        
        /* ä¸»å†…å®¹åŒºåŸŸ */
        .main-content {
            flex: 1;
            background: rgba(30, 30, 50, 0.8);
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(100, 100, 200, 0.3);
        }
        
        /* éš¾åº¦é€‰æ‹©ç•Œé¢ */
        .difficulty-screen {
            text-align: center;
            padding: 20px;
        }
        
        .difficulty-title {
            font-size: 1.8rem;
            margin-bottom: 30px;
            color: #e6e6ff;
        }
        
        .difficulty-options {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-top: 30px;
        }
        
        .difficulty-card {
            background: rgba(50, 50, 80, 0.7);
            border-radius: 10px;
            padding: 25px 15px;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }
        
        .difficulty-card:hover {
            transform: translateY(-5px);
            background: rgba(70, 70, 120, 0.8);
            border-color: #6a5acd;
            box-shadow: 0 5px 15px rgba(106, 90, 205, 0.4);
        }
        
        .difficulty-card h3 {
            font-size: 1.5rem;
            margin-bottom: 15px;
            color: #b19cd9;
        }
        
        .difficulty-card p {
            font-size: 0.9rem;
            color: #b0b0d0;
            margin-bottom: 10px;
        }
        
        /* æ•…äº‹èƒŒæ™¯ */
        .story-section {
            background: rgba(20, 20, 35, 0.7);
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 25px;
            border-left: 4px solid #ff6b6b;
        }
        
        .story-title {
            font-size: 1.4rem;
            margin-bottom: 15px;
            color: #ff8e53;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .story-content {
            line-height: 1.6;
            color: #d0d0e0;
        }
        
        /* æ¸¸æˆä¿¡æ¯ä¸é“å…·ç®± */
        .info-tools-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 25px;
            margin-bottom: 25px;
        }
        
        @media (max-width: 768px) {
            .info-tools-container {
                grid-template-columns: 1fr;
            }
        }
        
        .game-info {
            background: rgba(25, 25, 45, 0.9);
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(100, 100, 200, 0.3);
        }
        
        .tools-section {
            background: rgba(25, 25, 45, 0.9);
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(100, 100, 200, 0.3);
        }
        
        .section-title {
            font-size: 1.4rem;
            margin-bottom: 20px;
            color: #9b59b6;
            text-align: center;
            padding-bottom: 10px;
            border-bottom: 2px solid rgba(155, 89, 182, 0.4);
        }
        
        .info-item {
            display: flex;
            justify-content: space-between;
            padding: 8px 0;
            border-bottom: 1px solid rgba(100, 100, 180, 0.3);
        }
        
        .info-item:last-child {
            border-bottom: none;
        }
        
        .info-label {
            color: #b0b0d0;
        }
        
        .info-value {
            font-weight: bold;
            color: #f1c40f;
        }
        
        .actions-remaining {
            color: #2ecc71;
        }
        
        .days-remaining.danger {
            color: #e74c3c;
            animation: pulse 1.5s infinite;
        }
        
        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.6; }
            100% { opacity: 1; }
        }
        
        /* é“å…·ç³»ç»Ÿ - é‡ç‚¹ä¼˜åŒ–éƒ¨åˆ† */
        .tools-container {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
        }
        
        .tool-card {
            background: linear-gradient(145deg, rgba(70, 100, 130, 0.8), rgba(40, 60, 90, 0.8));
            border-radius: 10px;
            padding: 15px 10px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid rgba(90, 120, 180, 0.5);
            position: relative;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
        }
        
        .tool-card:hover:not(.used):not(.frozen) {
            transform: translateY(-5px);
            background: linear-gradient(145deg, rgba(80, 120, 160, 0.9), rgba(50, 80, 120, 0.9));
            border-color: #6a5acd;
            box-shadow: 0 6px 15px rgba(106, 90, 205, 0.5);
        }
        
        .tool-icon {
            font-size: 2.2rem;
            margin-bottom: 12px;
            color: #b19cd9;
            transition: all 0.3s ease;
        }
        
        .tool-card:hover:not(.used):not(.frozen) .tool-icon {
            transform: scale(1.1);
            color: #d0c0f0;
            text-shadow: 0 0 10px rgba(177, 156, 217, 0.7);
        }
        
        .tool-name {
            font-size: 1rem;
            color: #e6e6ff;
            font-weight: 500;
            transition: all 0.3s ease;
        }
        
        .tool-card:hover:not(.used):not(.frozen) .tool-name {
            color: #ffffff;
            text-shadow: 0 0 5px rgba(255, 255, 255, 0.5);
        }
        
        /* é“å…·çŠ¶æ€æ ‡è®° */
        .tool-card.used::after {
            content: "å·²ä½¿ç”¨";
            position: absolute;
            top: 8px;
            right: 8px;
            background: #e74c3c;
            color: white;
            font-size: 0.8rem;
            padding: 4px 8px;
            border-radius: 15px;
            font-weight: bold;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.3);
            z-index: 10;
        }
        
        .tool-card.frozen::after {
            content: "å·²å†»ç»“";
            position: absolute;
            top: 8px;
            right: 8px;
            background: #3498db;
            color: white;
            font-size: 0.8rem;
            padding: 4px 8px;
            border-radius: 15px;
            font-weight: bold;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.3);
            z-index: 10;
        }
        
        /* å·²ä½¿ç”¨é“å…·æ ·å¼ */
        .tool-card.used {
            background: linear-gradient(145deg, rgba(90, 60, 70, 0.7), rgba(60, 40, 45, 0.7));
            border-color: rgba(180, 80, 80, 0.5);
            opacity: 0.8;
            cursor: not-allowed;
        }
        
        .tool-card.used .tool-icon {
            color: #b08080;
        }
        
        .tool-card.used .tool-name {
            color: #c0a0a0;
        }
        
        /* å·²å†»ç»“é“å…·æ ·å¼ */
        .tool-card.frozen {
            background: linear-gradient(145deg, rgba(60, 80, 120, 0.7), rgba(40, 50, 90, 0.7));
            border-color: rgba(80, 140, 200, 0.5);
            cursor: not-allowed;
        }
        
        .tool-card.frozen .tool-icon {
            color: #80b0d0;
        }
        
        .tool-card.frozen .tool-name {
            color: #a0c0e0;
        }
        
        /* æ¨ç†æ—¥å¿— */
        .log-section {
            background: rgba(15, 15, 30, 0.8);
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 25px;
            max-height: 200px;
            overflow-y: auto;
            border: 1px solid rgba(100, 100, 180, 0.4);
        }
        
        .log-title {
            font-size: 1.4rem;
            margin-bottom: 15px;
            color: #3498db;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .log-content {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }
        
        .log-entry {
            padding: 12px 15px;
            background: rgba(40, 40, 70, 0.5);
            border-radius: 8px;
            border-left: 3px solid #3498db;
            font-size: 0.95rem;
        }
        
        .log-entry.suspicious {
            border-left-color: #e74c3c;
        }
        
        .log-entry.eliminated {
            border-left-color: #2ecc71;
        }
        
        .log-entry.tool-used {
            border-left-color: #9b59b6;
        }
        
        .log-time {
            font-size: 0.8rem;
            color: #95a5a6;
            margin-bottom: 5px;
        }
        
        /* å«Œç–‘äººç½‘æ ¼ */
        .suspects-section {
            margin-bottom: 25px;
        }
        
        .suspects-title {
            font-size: 1.4rem;
            margin: 0 0 15px 0;
            color: #b19cd9;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .grid-container {
            display: grid;
            gap: 12px;
            margin: 0 auto;
            justify-content: center;
        }
        
        .grid-2x2 {
            grid-template-columns: repeat(2, 1fr);
            max-width: 300px;
        }
        
        .grid-3x3 {
            grid-template-columns: repeat(3, 1fr);
            max-width: 450px;
        }
        
        .grid-4x4 {
            grid-template-columns: repeat(4, 1fr);
            max-width: 600px;
        }
        
        .grid-5x5 {
            grid-template-columns: repeat(5, 1fr);
            max-width: 750px;
        }
        
        .suspect-cell {
            aspect-ratio: 1;
            background: rgba(60, 60, 100, 0.6);
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2.5rem;
            cursor: pointer;
            transition: all 0.2s ease;
            position: relative;
            border: 2px solid transparent;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }
        
        .suspect-cell:hover {
            background: rgba(80, 80, 140, 0.8);
            border-color: #9b59b6;
            transform: scale(1.05);
            box-shadow: 0 6px 12px rgba(155, 89, 182, 0.4);
        }
        
        .suspect-cell.eliminated::before {
            content: "âœ˜";
            position: absolute;
            font-size: 4rem;
            color: rgba(255, 50, 50, 0.9);
            z-index: 10;
            text-shadow: 0 0 10px rgba(255, 0, 0, 0.7);
        }
        
        /* æŒ‰é’®åŒºåŸŸ */
        .buttons-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-top: 10px;
        }
        
        @media (max-width: 480px) {
            .buttons-container {
                grid-template-columns: 1fr;
            }
        }
        
        .btn {
            background: linear-gradient(45deg, #9b59b6, #6a5acd);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 50px;
            font-size: 1.1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            box-shadow: 0 4px 15px rgba(106, 90, 205, 0.4);
        }
        
        .btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(106, 90, 205, 0.6);
        }
        
        .btn:active {
            transform: translateY(1px);
        }
        
        .btn-restart {
            background: linear-gradient(45deg, #e74c3c, #c0392b);
        }
        
        /* æ¸¸æˆç»“æŸå¼¹çª— */
        .modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.3s ease;
        }
        
        .modal.active {
            opacity: 1;
            pointer-events: all;
        }
        
        .modal-content {
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            border-radius: 15px;
            padding: 40px;
            max-width: 90%;
            width: 500px;
            text-align: center;
            box-shadow: 0 20px 50px rgba(0, 0, 0, 0.7);
            border: 2px solid #6a5acd;
            position: relative;
        }
        
        .modal-title {
            font-size: 2.2rem;
            margin-bottom: 20px;
            color: #ff6b6b;
        }
        
        .modal-subtitle {
            font-size: 1.4rem;
            margin-bottom: 25px;
            color: #f1c40f;
        }
        
        .modal-story {
            background: rgba(30, 30, 50, 0.7);
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
            text-align: left;
            border-left: 4px solid #3498db;
        }
        
        .modal-killer {
            font-size: 5rem;
            margin: 20px 0;
        }
        
        .killer-confirm {
            font-size: 1.5rem;
            color: #2ecc71;
            margin: 10px 0;
        }
        
        /* å“åº”å¼è°ƒæ•´ */
        @media (max-width: 768px) {
            h1 {
                font-size: 2.2rem;
            }
            
            .difficulty-options {
                grid-template-columns: 1fr;
            }
            
            .suspect-cell {
                font-size: 2rem;
            }
            
            .modal-content {
                padding: 25px;
            }
            
            .modal-title {
                font-size: 1.8rem;
            }
            
            .tools-container {
                grid-template-columns: repeat(2, 1fr);
            }
        }
        
        /* æ»šåŠ¨æ¡æ ·å¼ */
        ::-webkit-scrollbar {
            width: 8px;
        }
        
        ::-webkit-scrollbar-track {
            background: rgba(20, 20, 35, 0.5);
            border-radius: 10px;
        }
        
        ::-webkit-scrollbar-thumb {
            background: linear-gradient(45deg, #9b59b6, #6a5acd);
            border-radius: 10px;
        }
        
        ::-webkit-scrollbar-thumb:hover {
            background: #6a5acd;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1><i class="fas fa-hat-wizard"></i> å¥³å·«çš„æ¯’è¯</h1>
        <p class="subtitle">åœ¨å«Œç–‘äººä¸­æ‰¾å‡ºçœŸå‡¶ï¼Œæ­å¼€ç¥ç§˜æ­»äº¡èƒŒåçš„çœŸç›¸ï¼</p>
    </div>
    
    <div id="difficultyScreen" class="difficulty-screen">
        <h2 class="difficulty-title">é€‰æ‹©æ¸¸æˆéš¾åº¦</h2>
        <p>éš¾åº¦è¶Šé«˜ï¼Œå«Œç–‘äººè¶Šå¤šï¼Œä½†æ¯å¤©è·å¾—çš„è¡ŒåŠ¨ç‚¹ä¹Ÿè¶Šå¤š</p>
        
        <div class="difficulty-options">
            <div class="difficulty-card" data-difficulty="easy">
                <h3>å®¹æ˜“æ¨¡å¼</h3>
                <p><i class="fas fa-chess-board"></i> 2Ã—2å«Œç–‘äººç½‘æ ¼</p>
                <p><i class="fas fa-running"></i> æ¯å¤©1è¡ŒåŠ¨ç‚¹</p>
                <p><i class="fas fa-ban"></i> æ— é“å…·</p>
            </div>
            
            <div class="difficulty-card" data-difficulty="medium">
                <h3>ä¸€èˆ¬æ¨¡å¼</h3>
                <p><i class="fas fa-chess-board"></i> 3Ã—3å«Œç–‘äººç½‘æ ¼</p>
                <p><i class="fas fa-running"></i> æ¯å¤©2è¡ŒåŠ¨ç‚¹</p>
                <p><i class="fas fa-magic"></i> 2ä¸ªéšæœºé“å…·</p>
            </div>
            
            <div class="difficulty-card" data-difficulty="hard">
                <h3>å›°éš¾æ¨¡å¼</h3>
                <p><i class="fas fa-chess-board"></i> 4Ã—4å«Œç–‘äººç½‘æ ¼</p>
                <p><i class="fas fa-running"></i> æ¯å¤©3è¡ŒåŠ¨ç‚¹</p>
                <p><i class="fas fa-magic"></i> 3ä¸ªé“å…·</p>
            </div>
            
            <div class="difficulty-card" data-difficulty="expert">
                <h3>æéš¾æ¨¡å¼</h3>
                <p><i class="fas fa-chess-board"></i> 5Ã—5å«Œç–‘äººç½‘æ ¼</p>
                <p><i class="fas fa-running"></i> æ¯å¤©4è¡ŒåŠ¨ç‚¹</p>
                <p><i class="fas fa-magic"></i> 3ä¸ªé“å…·</p>
            </div>
        </div>
    </div>
    
    <div id="gameContainer" class="game-container" style="display: none;">
        <div class="main-content">
            <!-- æ¡ˆä»¶èƒŒæ™¯ -->
            <div class="story-section">
                <h3 class="story-title"><i class="fas fa-book-open"></i> æ¡ˆä»¶èƒŒæ™¯</h3>
                <p class="story-content" id="storyContent"></p>
            </div>
            
            <!-- æ¸¸æˆä¿¡æ¯ä¸é“å…·ç®± -->
            <div class="info-tools-container">
                <!-- æ¸¸æˆä¿¡æ¯ -->
                <div class="game-info">
                    <h3 class="section-title"><i class="fas fa-info-circle"></i> æ¸¸æˆä¿¡æ¯</h3>
                    <div class="info-item">
                        <span class="info-label">å‰©ä½™å¤©æ•°ï¼š</span>
                        <span class="info-value days-remaining" id="daysRemaining">3å¤©</span>
                    </div>
                    <div class="info-item">
                        <span class="info-label">ä»Šæ—¥è¡ŒåŠ¨ç‚¹ï¼š</span>
                        <span class="info-value actions-remaining" id="actionsRemaining">0</span>
                    </div>
                    <div class="info-item">
                        <span class="info-label">å·²æ’é™¤ï¼š</span>
                        <span class="info-value" id="eliminatedCount">0</span>
                    </div>
                    <div class="info-item">
                        <span class="info-label">å‰©ä½™å«Œç–‘äººï¼š</span>
                        <span class="info-value" id="remainingCount">0</span>
                    </div>
                    <div class="info-item">
                        <span class="info-label">å½“å‰å¤©æ•°ï¼š</span>
                        <span class="info-value" id="currentDay">ç¬¬1å¤©</span>
                    </div>
                </div>
                
                <!-- é“å…·ç®± -->
                <div class="tools-section">
                    <h3 class="section-title"><i class="fas fa-toolbox"></i> é“å…·ç®±</h3>
                    <div class="tools-container" id="toolsContainer">
                        <!-- é“å…·å¡ç‰‡ç”±JSåŠ¨æ€ç”Ÿæˆ -->
                    </div>
                </div>
            </div>
            
            <!-- æ¨ç†æ—¥å¿— -->
            <div class="log-section">
                <h3 class="log-title"><i class="fas fa-scroll"></i> æ¨ç†æ—¥å¿—</h3>
                <div class="log-content" id="logContent"></div>
            </div>
            
            <!-- å«Œç–‘äººç½‘æ ¼ -->
            <div class="suspects-section">
                <h3 class="suspects-title"><i class="fas fa-search"></i> å«Œç–‘äºº</h3>
                <div class="grid-container" id="suspectGrid"></div>
            </div>
            
            <!-- æŒ‰é’®åŒºåŸŸ -->
            <div class="buttons-container">
                <button class="btn" id="nextDayBtn">
                    <i class="fas fa-moon"></i> <span id="nextDayText">ç»“æŸç¬¬1å¤©è°ƒæŸ¥</span>
                </button>
                
                <button class="btn btn-restart" id="restartBtn">
                    <i class="fas fa-redo"></i> é‡æ–°å¼€å§‹æ¸¸æˆ
                </button>
            </div>
        </div>
    </div>
    
    <div class="modal" id="gameOverModal">
        <div class="modal-content">
            <h2 class="modal-title" id="modalTitle">æ¡ˆä»¶ä¾¦ç ´ï¼</h2>
            <h3 class="modal-subtitle" id="modalSubtitle">ä½ æˆåŠŸæŠ“ä½äº†çœŸå‡¶ï¼</h3>
            
            <div class="modal-story">
                <h4>çœŸç›¸æ­ç§˜ï¼š</h4>
                <p id="truthReveal"></p>
            </div>
            
            <div class="modal-killer" id="killerEmoji"></div>
            <div class="killer-confirm" id="killerConfirm"></div>
            
            <button class="btn" id="playAgainBtn" style="margin-top: 20px; width: 100%;">
                <i class="fas fa-play"></i> å†ç©ä¸€æ¬¡
            </button>
        </div>
    </div>

    <script>
        // å®Œæ•´çš„25ä¸ªemojiæ•°æ®åº“
        const emojis = [
            "ğŸ§šâ€â™€ï¸", "ğŸ§œğŸ¼â€â™€ï¸", "ğŸ§â€â™‚ï¸", "ğŸ§Ÿâ€â™‚ï¸", "ğŸ§›â€â™‚ï¸",
            "ğŸ‘©â€ğŸ’»", "ğŸ§â€â™€ï¸", "ğŸ§™â€â™‚ï¸", "ğŸ§‘â€ğŸ„", "ğŸ¦¹ğŸ¼â€â™‚ï¸",
            "ğŸ¦¸ğŸ¼â€â™‚ï¸", "ğŸ¥·", "ğŸ¤´ğŸ»", "ğŸ‘¸ğŸ»", "ğŸ‘©ğŸ½â€ğŸ¨",
            "ğŸ§‘ğŸ¾â€âœˆï¸", "ğŸ‘©ğŸ¼â€ğŸ”¬", "ğŸ§‘ğŸ»â€ğŸ”§", "ğŸ‘©ğŸ»â€ğŸŒ¾", "ğŸ§•ğŸ¾",
            "ğŸ•ºğŸ»", "ğŸ’ƒğŸ»", "ğŸ‘©ğŸ½â€ğŸš’", "ğŸ§‘ğŸ½â€ğŸ¤", "ğŸ‘©ğŸ½â€ğŸ³"
        ];
        
        // æ¯ä¸ªemojiå¯¹åº”çš„åç§°
        const suspectNames = {
            "ğŸ§šâ€â™€ï¸": "ä»™å­",
            "ğŸ§œğŸ¼â€â™€ï¸": "ç¾äººé±¼",
            "ğŸ§â€â™‚ï¸": "ç¯ç¥",
            "ğŸ§Ÿâ€â™‚ï¸": "åƒµå°¸",
            "ğŸ§›â€â™‚ï¸": "å¸è¡€é¬¼",
            "ğŸ‘©â€ğŸ’»": "ç¨‹åºå‘˜",
            "ğŸ§â€â™€ï¸": "ç²¾çµ",
            "ğŸ§™â€â™‚ï¸": "å·«å¸ˆ",
            "ğŸ§‘â€ğŸ„": "åœ£è¯è€äºº",
            "ğŸ¦¹ğŸ¼â€â™‚ï¸": "è¶…çº§åæ´¾",
            "ğŸ¦¸ğŸ¼â€â™‚ï¸": "è¶…çº§è‹±é›„",
            "ğŸ¥·": "å¿è€…",
            "ğŸ¤´ğŸ»": "ç‹å­",
            "ğŸ‘¸ğŸ»": "å…¬ä¸»",
            "ğŸ‘©ğŸ½â€ğŸ¨": "è‰ºæœ¯å®¶",
            "ğŸ§‘ğŸ¾â€âœˆï¸": "é£è¡Œå‘˜",
            "ğŸ‘©ğŸ¼â€ğŸ”¬": "ç§‘å­¦å®¶",
            "ğŸ§‘ğŸ»â€ğŸ”§": "æœºæ¢°å¸ˆ",
            "ğŸ‘©ğŸ»â€ğŸŒ¾": "å†œæ°‘",
            "ğŸ§•ğŸ¾": "æˆ´å¤´å·¾çš„å¥³æ€§",
            "ğŸ•ºğŸ»": "è·³èˆçš„ç”·äºº",
            "ğŸ’ƒğŸ»": "è·³èˆçš„å¥³äºº",
            "ğŸ‘©ğŸ½â€ğŸš’": "æ¶ˆé˜²å‘˜",
            "ğŸ§‘ğŸ½â€ğŸ¤": "æ­Œæ‰‹",
            "ğŸ‘©ğŸ½â€ğŸ³": "å¨å¸ˆ"
        };
        
        // æ¯ä¸ªemojiå¯¹åº”çš„å®Œæ•´æ•…äº‹
        const stories = {
            "ğŸ§šâ€â™€ï¸": {
                background: "åœ¨æœˆå…‰æ£®æ—çš„æ·±å¤„ï¼Œå®ˆæŠ¤è€…è‰¾ç³è¢«å‘ç°å€’åœ¨ä¸€æœµå·¨å¤§çš„é­”æ³•èŠ±æ—ï¼Œå¥¹çš„èº«ä½“è¢«å¥‡æ€ªçš„å‘å…‰ç²‰æœ«è¦†ç›–ã€‚ç°åœºæ²¡æœ‰æ˜æ˜¾çš„æ‰“æ–—ç—•è¿¹ï¼Œåªæœ‰æ•£è½çš„èŠ±ç“£å’Œå¾®å¼±çš„å…‰ç‚¹ã€‚",
                truth: "å‡¶æ‰‹æ˜¯ä»™å­ğŸ§šâ€â™€ï¸ã€‚å¥¹å«‰å¦’å®ˆæŠ¤è€…è‰¾ç³ä¸æ£®æ—çš„äº²å¯†è”ç³»ï¼Œåœ¨é­”æ³•èŠ±ç²‰ä¸­æ··å…¥äº†è‡´å‘½æ¯’ç´ ï¼Œå¯¼è‡´è‰¾ç³åœ¨ç…§æ–™èŠ±æœµæ—¶ä¸­æ¯’èº«äº¡ã€‚",
                alibis: {}
            },
            "ğŸ§œğŸ¼â€â™€ï¸": {
                background: "åœ¨çŠç‘šå®«æ®¿çš„å®åº“ä¸­ï¼Œæµ·ç‹çš„ä¸‰å‰æˆŸè¢«ç›—ï¼Œå®ˆå«ç‰¹é‡ŒåŒè¢«å‘ç°æ­»åœ¨æµ·è—»ä¸›ä¸­ã€‚ä»–çš„è„–å­ä¸Šæœ‰å¥‡æ€ªçš„å’¬ç—•ï¼Œå‘¨å›´æ•£è½ç€çç å’Œè´å£³ã€‚",
                truth: "å‡¶æ‰‹æ˜¯ç¾äººé±¼ğŸ§œğŸ¼â€â™€ï¸ã€‚å¥¹ä¸ºäº†è·å¾—è‡ªç”±ï¼Œç”¨æµ·è›‡æ¯’ç‰™åˆ¶æˆçš„åŒ•é¦–åˆºæ€äº†å®ˆå«ï¼Œå¹¶å·èµ°äº†ä¸‰å‰æˆŸï¼Œè®¡åˆ’æ¨ç¿»æµ·ç‹çš„ç»Ÿæ²»ã€‚",
                alibis: {}
            },
            "ğŸ§â€â™‚ï¸": {
                background: "åœ¨æ²™æ¼ é›†å¸‚çš„ç¥ç¯å±•è§ˆä¼šä¸Šï¼Œä¸€ç›å¤è€çš„é“œç¯è¢«æ‰“ç ´ï¼Œç¯ç¥å¡é‡Œå§†è¢«å‘ç°æ­»äº¡ã€‚ä»–çš„èº«ä½“å‘ˆç°å‡ºå¥‡ç‰¹çš„åŠé€æ˜çŠ¶æ€ï¼Œå‘¨å›´æ•£è½ç€ç»ç’ƒç¢ç‰‡ã€‚",
                truth: "å‡¶æ‰‹æ˜¯ç¯ç¥ğŸ§â€â™‚ï¸ã€‚ä»–å› è¢«å¦ä¸€ä¸ªç¯ç¥è¯…å’’è€Œè‡ªçˆ†èº«äº¡ï¼Œä½†ç°åœºç—•è¿¹è¡¨æ˜æœ‰äººæ•…æ„ç ´åäº†å°å°ï¼Œå¯¼è‡´è¯…å’’æå‰çˆ†å‘ã€‚",
                alibis: {}
            },
            "ğŸ§Ÿâ€â™‚ï¸": {
                background: "åœ¨åºŸå¼ƒå¢“åœ°çš„å®ˆå¢“äººå°å±‹ï¼Œè€å®ˆå¢“äººè¢«å‘ç°æ­»äº¡ï¼Œå°¸ä½“ä¸Šæœ‰æ˜æ˜¾çš„æ’•å’¬ç—•è¿¹ã€‚å¥‡æ€ªçš„æ˜¯ï¼Œå¢“åœ°ä¸­çš„å‡ ä¸ªåŸå¢“è¢«æŒ–å¼€ï¼Œä½†æ²¡æœ‰ä»»ä½•ç‰©å“ä¸¢å¤±ã€‚",
                truth: "å‡¶æ‰‹æ˜¯åƒµå°¸ğŸ§Ÿâ€â™‚ï¸ã€‚ä»–å› é•¿æœŸé¥¥é¥¿å¤±å»ç†æ™ºï¼Œè¢­å‡»äº†å”¯ä¸€èƒ½ç»™ä»–æä¾›é£Ÿç‰©çš„å®ˆå¢“äººã€‚æ’•å’¬ç—•è¿¹å’Œå¢“åœ°è¢«æŒ–éƒ½æ˜¯ä»–å¯»æ‰¾é£Ÿç‰©çš„è¯æ®ã€‚",
                alibis: {}
            },
            "ğŸ§›â€â™‚ï¸": {
                background: "åœ¨å¤å ¡çš„å®´ä¼šå…ï¼Œè´µæ—å°‘å¥³è‰¾ç±³è‰äºšè¢«å‘ç°æ­»åœ¨é’¢ç´æ—ï¼Œè„–å­ä¸Šæœ‰ä¸¤ä¸ªç»†å°çš„å­”æ´ã€‚å¤§å…çš„çª—æˆ·æ•å¼€ï¼Œåœ°ä¸Šæœ‰å°‘é‡æ³¥åœŸå’Œæ°´æ¸ã€‚",
                truth: "å‡¶æ‰‹æ˜¯å¸è¡€é¬¼ğŸ§›â€â™‚ï¸ã€‚ä»–ä¸ºäº†æŠ¥å¤è‰¾ç±³è‰äºšå®¶æ—å‡ ä¸ªä¸–çºªå‰çš„èƒŒå›ï¼Œåœ¨æ»¡æœˆä¹‹å¤œæ½œå…¥å¤å ¡ï¼Œå¸å¹²äº†å¥¹çš„è¡€æ¶²ã€‚",
                alibis: {}
            },
            "ğŸ‘©â€ğŸ’»": {
                background: "åœ¨ç§‘æŠ€å…¬å¸çš„æœåŠ¡å™¨æœºæˆ¿ï¼Œé¦–å¸­ç¨‹åºå‘˜é©¬å…‹è¢«å‘ç°æ­»åœ¨æ§åˆ¶å°å‰ã€‚ä»–çš„ç”µè„‘å±å¹•ä¸Šæ˜¾ç¤ºç€å¥‡æ€ªçš„ä»£ç ï¼Œæœºæˆ¿æ¸©åº¦å¼‚å¸¸å‡é«˜ã€‚",
                truth: "å‡¶æ‰‹æ˜¯ç¨‹åºå‘˜ğŸ‘©â€ğŸ’»ã€‚å¥¹å› è¢«é©¬å…‹çªƒå–äº†äººå·¥æ™ºèƒ½ç®—æ³•çš„ä¸“åˆ©ï¼Œåœ¨æœåŠ¡å™¨ä¸­æ¤å…¥äº†è¿‡è½½ç¨‹åºï¼Œå¯¼è‡´æœºæˆ¿æ¸©åº¦éª¤å‡å¼•å‘å¿ƒè„éª¤åœã€‚",
                alibis: {}
            },
            "ğŸ§â€â™€ï¸": {
                background: "åœ¨å¤æ ‘æ£®æ—çš„ç¥­å›ï¼Œå¤§ç¥­å¸å¥¥åˆ©å®‰è¢«å‘ç°æ­»äº¡ï¼Œèº«ä½“è¢«è†æ£˜ç¼ ç»•ã€‚ç¥­å›ä¸Šçš„åœ£æ¯è¢«æ‰“ç¿»ï¼Œå‘¨å›´æ ‘æœ¨å‘ˆç°å‡ºä¸è‡ªç„¶çš„æ¯èçŠ¶æ€ã€‚",
                truth: "å‡¶æ‰‹æ˜¯ç²¾çµğŸ§â€â™€ï¸ã€‚å¥¹åå¯¹å¥¥åˆ©å®‰ä¸äººç±»çš„åˆä½œæ”¿ç­–ï¼Œç”¨è¢«æ±¡æŸ“çš„åœ£æ°´æ¯’æ­»äº†ä»–ï¼Œå¯¼è‡´æ£®æ—ç”Ÿå‘½åŠ›å¤±è¡¡ã€‚",
                alibis: {}
            },
            "ğŸ§™â€â™‚ï¸": {
                background: "åœ¨é­”æ³•å­¦é™¢çš„å›¾ä¹¦é¦†ï¼Œé™¢é•¿é˜¿å°”å¸ƒæ–¯è¢«å‘ç°æ­»åœ¨ä¸€æœ¬æ‰“å¼€çš„ç¦ä¹¦æ—ã€‚ä»–çš„èº«ä½“è¢«çŸ³åŒ–äº†ä¸€åŠï¼Œçœ¼é•œç¢è£‚åœ¨åœ°æ¿ä¸Šã€‚",
                truth: "å‡¶æ‰‹æ˜¯å·«å¸ˆğŸ§™â€â™‚ï¸ã€‚ä»–ä¸ºäº†è·å–ç¦ä¹¦ä¸­çš„é»‘é­”æ³•çŸ¥è¯†ï¼Œåœ¨é™¢é•¿å‘ç°æ—¶ä½¿ç”¨äº†çŸ³åŒ–å’’è¯­ï¼Œä½†å› å’’è¯­åå™¬å¯¼è‡´é™¢é•¿éƒ¨åˆ†çŸ³åŒ–æ­»äº¡ã€‚",
                alibis: {}
            },
            "ğŸ§‘â€ğŸ„": {
                background: "åœ¨ç©å…·å·¥å‚çš„ç¤¼ç‰©å·¥åŠï¼Œè€æ¿å°¼å…‹è¢«å‘ç°æ­»åœ¨è£…æ»¡ç¤¼ç‰©çš„é›ªæ©‡æ—ã€‚ä»–çš„èƒ¡å­ä¸Šæ²¾æ»¡äº†å¥‡æ€ªçš„ç²˜æ¶²ï¼Œå‘¨å›´æ•£è½ç€ç ´æŸçš„ç©å…·ã€‚",
                truth: "å‡¶æ‰‹æ˜¯åœ£è¯è€äººğŸ§‘â€ğŸ„ã€‚ä»–å› å°¼å…‹è®¡åˆ’ç”¨æœºå™¨äººå–ä»£åœ£è¯è€äººï¼Œåœ¨ç¤¼ç‰©ä¸­è®¾ç½®äº†ç‚¸å¼¹ï¼Œå´æ„å¤–æå‰å¼•çˆ†ã€‚",
                alibis: {}
            },
            "ğŸ¦¹ğŸ¼â€â™‚ï¸": {
                background: "åœ¨åŸå¸‚é“¶è¡Œçš„ä¿é™©åº“ï¼Œä¿å®‰é˜Ÿé•¿è¢«å‘ç°æ­»åœ¨æ‰“å¼€çš„é‡‘åº“å‰ã€‚å¥‡æ€ªçš„æ˜¯ï¼Œå¤§é‡ç°é‡‘ä»åœ¨åŸå¤„ï¼Œåªæœ‰ä¸€ä»¶ç‰¹å®šçš„è‰ºæœ¯å“è¢«ç›—ã€‚",
                truth: "å‡¶æ‰‹æ˜¯è¶…çº§åæ´¾ğŸ¦¹ğŸ¼â€â™‚ï¸ã€‚ä»–ä¸ºäº†è·å–è—åœ¨é‡‘åº“ä¸­çš„å¤–æ˜Ÿèƒ½æºæ™¶ä½“ï¼Œç”¨æ¬¡å£°æ³¢æ­¦å™¨æ€æ­»äº†ä¿å®‰é˜Ÿé•¿ã€‚",
                alibis: {}
            },
            "ğŸ¦¸ğŸ¼â€â™‚ï¸": {
                background: "åœ¨å¤ªç©ºç«™çš„ååº”å †å®¤ï¼Œå®‡èˆªå‘˜æåšå£«è¢«å‘ç°æ­»äº¡ã€‚ä»–çš„å®‡èˆªæœè¢«æ’•è£‚ï¼Œæ‰‹ä¸­ç´§æ¡ç€ä¸€å—å‘å…‰çš„é™¨çŸ³ç¢ç‰‡ã€‚",
                truth: "å‡¶æ‰‹æ˜¯è¶…çº§è‹±é›„ğŸ¦¸ğŸ¼â€â™‚ï¸ã€‚ä»–å› è¢«é™¨çŸ³è¾å°„å½±å“è€Œå¤±æ§ï¼Œæ„å¤–é‡Šæ”¾èƒ½é‡å†²å‡»å¯¼è‡´æåšå£«æ­»äº¡ã€‚",
                alibis: {}
            },
            "ğŸ¥·": {
                background: "åœ¨åšç‰©é¦†çš„æ—¥æœ¬åˆ€å±•åŒºï¼Œé¦†é•¿å±±æœ¬è¢«å‘ç°æ­»åœ¨å±•ç¤ºæŸœæ—ã€‚ç°åœºæ²¡æœ‰å¼ºè¡Œè¿›å…¥çš„ç—•è¿¹ï¼Œä½†ä¸€æŠŠçè´µçš„æ­¦å£«åˆ€å¤±è¸ªäº†ã€‚",
                truth: "å‡¶æ‰‹æ˜¯å¿è€…ğŸ¥·ã€‚ä»–å¥‰ç»„ç»‡å‘½ä»¤å–å›å®¶æ—ä¼ ä¸–å®åˆ€ï¼Œç”¨çª’æ¯é’¢ä¸æš—æ€äº†å‘ç°ä»–çš„é¦†é•¿ã€‚",
                alibis: {}
            },
            "ğŸ¤´ğŸ»": {
                background: "åœ¨çš‡å®¶èŠ±å›­çš„èŒ¶ä¼šï¼Œå…¬çˆµå¤«äººè¢«å‘ç°æ­»åœ¨ç«ç‘°ä¸›ä¸­ã€‚å¥¹çš„èŒ¶æ¯ä¸­æ£€æµ‹å‡ºå‰§æ¯’ï¼Œç‹å† ä¸Šçš„å®çŸ³å¤±è¸ªäº†ã€‚",
                truth: "å‡¶æ‰‹æ˜¯ç‹å­ğŸ¤´ğŸ»ã€‚ä»–ä¸ºäº†é˜»æ­¢å…¬çˆµå¤«äººæ­éœ²ä»–çš„ç»§æ‰¿æƒä¸‘é—»ï¼Œåœ¨å¥¹çš„èŒ¶ä¸­åŠ å…¥äº†é©¬é’±å­ç¢±ã€‚",
                alibis: {}
            },
            "ğŸ‘¸ğŸ»": {
                background: "åœ¨åŸå ¡çš„èˆå…ï¼Œèˆä¼šä¸»æŒäººè¢«å‘ç°æ­»åœ¨é˜³å°ä¸Šã€‚å¥¹çš„ç¤¼æœè¢«æ’•ç ´ï¼Œæ‰‹ä¸­ç´§æ¡ç€ä¸€é¢—çç çº½æ‰£ã€‚",
                truth: "å‡¶æ‰‹æ˜¯å…¬ä¸»ğŸ‘¸ğŸ»ã€‚å¥¹å› å«‰å¦’ä¸»æŒäººä¸ç‹å­çš„äº²å¯†å…³ç³»ï¼Œåœ¨äº‰åµä¸­å°†å¯¹æ–¹æ¨ä¸‹é˜³å°ã€‚",
                alibis: {}
            },
            "ğŸ‘©ğŸ½â€ğŸ¨": {
                background: "åœ¨è‰ºæœ¯ç”»å»Šçš„æ–°å“å‘å¸ƒä¼šï¼Œè¯„è®ºå®¶æŸ¥å°”æ–¯è¢«å‘ç°æ­»åœ¨æœªå®Œæˆçš„ç”»ä½œå‰ã€‚ä»–çš„è„¸ä¸Šæ²¾æ»¡äº†é¢œæ–™ï¼Œç”»ä½œè¢«ä¸¥é‡ç ´åã€‚",
                truth: "å‡¶æ‰‹æ˜¯è‰ºæœ¯å®¶ğŸ‘©ğŸ½â€ğŸ¨ã€‚å¥¹å› æŸ¥å°”æ–¯ç»™å¥¹çš„ä½œå“å·®è¯„è€Œæ„¤æ€’ï¼Œç”¨è°ƒè‰²åˆ€åˆºæ­»äº†ä»–ã€‚",
                alibis: {}
            },
            "ğŸ§‘ğŸ¾â€âœˆï¸": {
                background: "åœ¨é£æœºé©¾é©¶èˆ±ï¼Œå‰¯æœºå¸ˆè¢«å‘ç°æ­»åœ¨åº§ä½ä¸Šã€‚é£è¡Œè®°å½•ä»ªæ˜¾ç¤ºé£æœºæ›¾çŸ­æš‚å¤±æ§ï¼Œä»ªè¡¨ç›˜ä¸Šæœ‰å¥‡æ€ªçš„åˆ®ç—•ã€‚",
                truth: "å‡¶æ‰‹æ˜¯é£è¡Œå‘˜ğŸ§‘ğŸ¾â€âœˆï¸ã€‚ä»–å› å‰¯æœºå¸ˆå‘ç°ä»–èµ°ç§ç å®ï¼Œåœ¨é£è¡Œä¸­åˆ¶é€ ç¼ºæ°§ç¯å¢ƒå¯¼è‡´å¯¹æ–¹æ˜è¿·æ­»äº¡ã€‚",
                alibis: {}
            },
            "ğŸ‘©ğŸ¼â€ğŸ”¬": {
                background: "åœ¨å®éªŒå®¤çš„æ— èŒå®¤ï¼Œç ”ç©¶å‘˜å¤§å«è¢«å‘ç°æ­»äº¡ã€‚ä»–çš„é˜²æŠ¤æœè¢«åˆºç ´ï¼ŒåŸ¹å…»çš¿ä¸­çš„è‡´å‘½ç—…æ¯’æ ·æœ¬å¤±è¸ªã€‚",
                truth: "å‡¶æ‰‹æ˜¯ç§‘å­¦å®¶ğŸ‘©ğŸ¼â€ğŸ”¬ã€‚å¥¹ä¸ºäº†è·å–å¤§å«çš„ç ”ç©¶æˆæœï¼Œåœ¨é˜²æŠ¤æœä¸Šåšäº†æ‰‹è„šï¼Œä½¿ä»–æš´éœ²åœ¨è‡´å‘½ç—…æ¯’ä¸­ã€‚",
                alibis: {}
            },
            "ğŸ§‘ğŸ»â€ğŸ”§": {
                background: "åœ¨æ±½è½¦ä¿®ç†å‚ï¼Œè€æ¿æ‰˜å°¼è¢«å‘ç°æ­»åœ¨å‡é™æœºä¸‹ã€‚ä»–çš„å·¥å…·æ•£è½ä¸€åœ°ï¼Œåˆ¹è½¦ç³»ç»Ÿè¢«ç¯¡æ”¹è¿‡ã€‚",
                truth: "å‡¶æ‰‹æ˜¯æœºæ¢°å¸ˆğŸ§‘ğŸ»â€ğŸ”§ã€‚ä»–å› æ‰˜å°¼å…‹æ‰£å·¥èµ„ï¼Œæ•…æ„ç ´åäº†å‡é™æœºçš„æ¶²å‹ç³»ç»Ÿå¯¼è‡´äº‹æ•…ã€‚",
                alibis: {}
            },
            "ğŸ‘©ğŸ»â€ğŸŒ¾": {
                background: "åœ¨æœ‰æœºå†œåœºçš„è°·ä»“ï¼Œå†œäº§å“æ£€æŸ¥å‘˜è¢«å‘ç°æ­»åœ¨éº¦å †ä¸­ã€‚ä»–çš„å˜´é‡Œå¡æ»¡äº†æœ‰æœºè‹¹æœï¼Œæ£€æµ‹ä»ªæ˜¾ç¤ºå¼‚å¸¸å†œè¯æ®‹ç•™ã€‚",
                truth: "å‡¶æ‰‹æ˜¯å†œæ°‘ğŸ‘©ğŸ»â€ğŸŒ¾ã€‚å¥¹å› æ£€æŸ¥å‘˜è¦æ›å…‰å¥¹ä½¿ç”¨è¿ç¦å†œè¯ï¼Œç”¨æ¯’è‹¹æœæ€äººç­å£ã€‚",
                alibis: {}
            },
            "ğŸ§•ğŸ¾": {
                background: "åœ¨æ¸…çœŸå¯ºçš„å›¾ä¹¦é¦†ï¼Œä¼Šç›ç›®è¢«å‘ç°æ­»åœ¨ç¥ˆç¥·æ¯¯ä¸Šã€‚ä»–çš„ç»ä¹¦è¢«æ’•æ¯ï¼Œç°åœºæœ‰å¥‡æ€ªçš„é¦™æ°´æ°”å‘³ã€‚",
                truth: "å‡¶æ‰‹æ˜¯æˆ´å¤´å·¾çš„å¥³æ€§ğŸ§•ğŸ¾ã€‚å¥¹å› ä¼Šç›ç›®åå¯¹å¥³æ€§æ•™è‚²ï¼Œåœ¨é¦™ç‚‰ä¸­æ··å…¥è‡´å¹»å‰‚å¯¼è‡´å…¶å¿ƒè„ç—…å‘ã€‚",
                alibis: {}
            },
            "ğŸ•ºğŸ»": {
                background: "åœ¨å¤œæ€»ä¼šçš„èˆæ± ï¼Œæ˜æ˜ŸDJè¢«å‘ç°æ­»åœ¨éŸ³å“è®¾å¤‡æ—ã€‚ä»–çš„è€³æœºçº¿ç¼ ç»•åœ¨è„–å­ä¸Šï¼Œæ§åˆ¶å°è¢«ç ´åã€‚",
                truth: "å‡¶æ‰‹æ˜¯è·³èˆçš„ç”·äººğŸ•ºğŸ»ã€‚ä»–å› DJå·äº†ä»–çš„æ··éŸ³ä½œå“ï¼Œåœ¨äº‰åµä¸­ç”¨è€³æœºçº¿æ„å¤–å‹’æ­»äº†å¯¹æ–¹ã€‚",
                alibis: {}
            },
            "ğŸ’ƒğŸ»": {
                background: "åœ¨èŠ­è•¾èˆå‰§é™¢çš„åŒ–å¦†é—´ï¼Œé¦–å¸­èˆè€…è¢«å‘ç°æ­»åœ¨é•œå­å‰ã€‚å¥¹çš„èˆé‹è¢«å‰²ç ´ï¼Œåœ°æ¿ä¸Šæ´’æ»¡äº†æ»‘çŸ³ç²‰ã€‚",
                truth: "å‡¶æ‰‹æ˜¯è·³èˆçš„å¥³äººğŸ’ƒğŸ»ã€‚å¥¹ä¸ºäº†å–ä»£é¦–å¸­ä½ç½®ï¼Œåœ¨èˆé‹ä¸­æ”¾ç½®äº†æ¯’é’ˆã€‚",
                alibis: {}
            },
            "ğŸ‘©ğŸ½â€ğŸš’": {
                background: "åœ¨ç«ç¾ç°åœºçš„åºŸå¢Ÿï¼Œæ¶ˆé˜²é˜Ÿé•¿è¢«å‘ç°æ­»åœ¨é€ƒç”Ÿé€šé“ã€‚ä»–çš„æ°§æ°”ç½é˜€é—¨è¢«å…³é—­ï¼Œå¤´ç›”ä¸Šæœ‰é‡ç‰©å‡»æ‰“ç—•è¿¹ã€‚",
                truth: "å‡¶æ‰‹æ˜¯æ¶ˆé˜²å‘˜ğŸ‘©ğŸ½â€ğŸš’ã€‚å¥¹å› é˜Ÿé•¿æ©ç›–å¥¹è¿‡å»çš„å¤±è¯¯å¯¼è‡´é˜Ÿå‹æ­»äº¡ï¼Œåœ¨æ··ä¹±ä¸­å®æ–½äº†æŠ¥å¤ã€‚",
                alibis: {}
            },
            "ğŸ§‘ğŸ½â€ğŸ¤": {
                background: "åœ¨æ¼”å”±ä¼šçš„åå°ï¼ŒéŸ³ä¹åˆ¶ä½œäººè¢«å‘ç°æ­»åœ¨ä¼‘æ¯å®¤ã€‚ä»–çš„è€³æœµæµè¡€ï¼ŒéŸ³å“è®¾å¤‡è¢«è°ƒåˆ°æœ€å¤§éŸ³é‡ã€‚",
                truth: "å‡¶æ‰‹æ˜¯æ­Œæ‰‹ğŸ§‘ğŸ½â€ğŸ¤ã€‚ä»–å› åˆ¶ä½œäººæ³„éœ²ä»–çš„å¸æ¯’ä¸‘é—»ï¼Œç”¨é«˜é¢‘å£°æ³¢æ­¦å™¨åˆ¶é€ äº†æ€äººç°åœºã€‚",
                alibis: {}
            },
            "ğŸ‘©ğŸ½â€ğŸ³": {
                background: "åœ¨ç±³å…¶æ—é¤å…çš„å¨æˆ¿ï¼Œç¾é£Ÿè¯„è®ºå®¶è¢«å‘ç°æ­»åœ¨å†·è—åº“ã€‚ä»–çš„å˜´é‡Œå¡æ»¡äº†é¹…è‚é…±ï¼Œä½“æ¸©è®¡æ˜¾ç¤ºé›¶ä¸‹æ¸©åº¦ã€‚",
                truth: "å‡¶æ‰‹æ˜¯å¨å¸ˆğŸ‘©ğŸ½â€ğŸ³ã€‚å¥¹å› è¯„è®ºå®¶ç»™äº†é¤å…å·®è¯„ï¼Œå°†ä»–é”åœ¨å†·è—åº“å¹¶åˆ¶é€ äº†æ„å¤–å‡è±¡ã€‚",
                alibis: {}
            }
        };
        
        // ä¸ºæ¯ä¸ªå«Œç–‘äººåˆ›å»ºè´¨ç–‘ç†ç”±
        emojis.forEach(emoji => {
            if (!stories[emoji].alibis) stories[emoji].alibis = {};
            
            emojis.filter(e => e !== emoji).forEach(otherEmoji => {
                const reasons = [
                    `æœ‰ç›‘æ§å½•åƒæ˜¾ç¤º${suspectNames[otherEmoji]}æ¡ˆå‘æ—¶åœ¨å¦ä¸€ä¸ªåŸå¸‚`,
                    `${suspectNames[otherEmoji]}æœ‰å®Œæ•´çš„ä¸åœ¨åœºè¯æ˜ï¼Œå¤šäººå¯ä»¥ä½œè¯`,
                    `æ³•åŒ»æŠ¥å‘Šæ˜¾ç¤ºæ­»äº¡æ—¶é—´ä¸${suspectNames[otherEmoji]}çš„è¡Œç¨‹å®Œå…¨ä¸ç¬¦`,
                    `${suspectNames[otherEmoji]}çš„DNAä¸ç°åœºé—ç•™ç‰©ä¸åŒ¹é…`,
                    `æ²¡æœ‰è¯æ®æ˜¾ç¤º${suspectNames[otherEmoji]}æœ‰ä½œæ¡ˆåŠ¨æœº`,
                    `${suspectNames[otherEmoji]}çš„æŒ‡çº¹ä¸å‡¶å™¨ä¸Šçš„ä¸åŒ¹é…`,
                    `ç›®å‡»è€…è¯å®${suspectNames[otherEmoji]}åœ¨æ¡ˆå‘æ—¶åœ¨å…¬å¼€åœºåˆå‡ºç°`,
                    `æŠ€æœ¯åˆ†ææ’é™¤äº†${suspectNames[otherEmoji]}çš„ä½œæ¡ˆå¯èƒ½æ€§`,
                    `é€šä¿¡è®°å½•æ˜¾ç¤º${suspectNames[otherEmoji]}å½“æ—¶æ­£åœ¨è§†é¢‘é€šè¯`,
                    `æ³•åŒ»è¯æ®è¡¨æ˜å‡¶æ‰‹ç‰¹å¾ä¸${suspectNames[otherEmoji]}ä¸ç¬¦`
                ];
                
                stories[emoji].alibis[otherEmoji] = reasons;
            });
        });

        // æ¸¸æˆæ•°æ®
        const gameData = {
            emojis: emojis,
            stories: stories,
            tools: [
                { id: 1, name: "çº¿ç´¢åˆ†æ", icon: "fas fa-filter", desc: "éšæœºæ’é™¤2-4åæ— è¾œå«Œç–‘äºº" },
                { id: 2, name: "åŒºåŸŸæ’é™¤", icon: "fas fa-times-circle", desc: "æ’é™¤ä¸€æ•´è¡Œæˆ–ä¸€æ•´åˆ—å«Œç–‘äºº" },
                { id: 3, name: "æ— è¾œæ’é™¤", icon: "fas fa-user-slash", desc: "éšæœºæ’é™¤3-5åæ— è¾œå«Œç–‘äºº" }
            ]
        };

        // æ¸¸æˆçŠ¶æ€
        let gameState = {
            difficulty: null,
            killer: null,
            suspects: [],
            eliminated: [],
            currentDay: 1,
            actionsLeft: 0,
            tools: [], // å½“å‰å¯ç”¨çš„é“å…·
            gameOver: false,
            story: "",
            truth: "",
            alibis: {},
            toolUsedToday: false // æ ‡è®°å½“å¤©æ˜¯å¦å·²ä½¿ç”¨é“å…·
        };

        // DOM å…ƒç´ 
        const difficultyScreen = document.getElementById('difficultyScreen');
        const gameContainer = document.getElementById('gameContainer');
        const suspectGrid = document.getElementById('suspectGrid');
        const storyContent = document.getElementById('storyContent');
        const logContent = document.getElementById('logContent');
        const daysRemaining = document.getElementById('daysRemaining');
        const actionsRemaining = document.getElementById('actionsRemaining');
        const eliminatedCount = document.getElementById('eliminatedCount');
        const remainingCount = document.getElementById('remainingCount');
        const currentDay = document.getElementById('currentDay');
        const nextDayText = document.getElementById('nextDayText');
        const toolsContainer = document.getElementById('toolsContainer');
        const gameOverModal = document.getElementById('gameOverModal');
        const modalTitle = document.getElementById('modalTitle');
        const modalSubtitle = document.getElementById('modalSubtitle');
        const truthReveal = document.getElementById('truthReveal');
        const killerEmoji = document.getElementById('killerEmoji');
        const killerConfirm = document.getElementById('killerConfirm');

        // åˆå§‹åŒ–æ¸¸æˆ
        function initGame(difficulty) {
            gameState.difficulty = difficulty;
            
            // æ ¹æ®éš¾åº¦è®¾ç½®ç½‘æ ¼å¤§å°
            let gridSize;
            switch(difficulty) {
                case 'easy': gridSize = 4; break;
                case 'medium': gridSize = 9; break;
                case 'hard': gridSize = 16; break;
                case 'expert': gridSize = 25; break;
            }
            
            // éšæœºé€‰æ‹©å«Œç–‘äºº
            const shuffledEmojis = [...gameData.emojis].sort(() => Math.random() - 0.5);
            gameState.suspects = shuffledEmojis.slice(0, gridSize);
            
            // éšæœºé€‰æ‹©å‡¶æ‰‹
            gameState.killer = gameState.suspects[Math.floor(Math.random() * gameState.suspects.length)];
            
            // è®¾ç½®æ•…äº‹èƒŒæ™¯å’ŒçœŸç›¸
            gameState.story = gameData.stories[gameState.killer].background;
            gameState.truth = gameData.stories[gameState.killer].truth;
            gameState.alibis = gameData.stories[gameState.killer].alibis;
            
            // é‡ç½®æ¸¸æˆçŠ¶æ€
            gameState.eliminated = [];
            gameState.currentDay = 1;
            gameState.tools = [];
            gameState.gameOver = false;
            gameState.toolUsedToday = false;
            
            // æ ¹æ®éš¾åº¦è®¾ç½®é“å…·
            setupToolsForDifficulty(difficulty);
            
            // åˆå§‹åŒ–UI
            renderGame();
            
            // æ˜¾ç¤ºæ¸¸æˆç•Œé¢
            difficultyScreen.style.display = 'none';
            gameContainer.style.display = 'flex';
            
            // å¼€å§‹ç¬¬ä¸€å¤©
            startNewDay();
        }

        // æ ¹æ®éš¾åº¦è®¾ç½®é“å…·
        function setupToolsForDifficulty(difficulty) {
            gameState.tools = [];
            
            // å¤åˆ¶é“å…·æ•°ç»„
            let availableTools = [...gameData.tools];
            
            switch(difficulty) {
                case 'easy':
                    // å®¹æ˜“æ¨¡å¼ï¼šæ— é“å…·
                    break;
                    
                case 'medium':
                    // ä¸€èˆ¬æ¨¡å¼ï¼šéšæœºæä¾›2ä¸ªé“å…·
                    // éšæœºæ‰“ä¹±é“å…·æ•°ç»„
                    availableTools.sort(() => Math.random() - 0.5);
                    // å–å‰2ä¸ª
                    gameState.tools = availableTools.slice(0, 2).map(tool => ({
                        ...tool, 
                        status: 'active',
                        used: false
                    }));
                    break;
                    
                case 'hard':
                case 'expert':
                    // å›°éš¾å’Œæéš¾æ¨¡å¼ï¼šæä¾›å…¨éƒ¨3ä¸ªé“å…·
                    gameState.tools = [...gameData.tools].map(tool => ({
                        ...tool, 
                        status: 'active',
                        used: false
                    }));
                    break;
            }
        }

        // å¼€å§‹æ–°çš„ä¸€å¤©
        function startNewDay() {
            // è®¾ç½®è¡ŒåŠ¨ç‚¹ï¼ˆæ ¹æ®éš¾åº¦ï¼‰
            switch(gameState.difficulty) {
                case 'easy': gameState.actionsLeft = 1; break;
                case 'medium': gameState.actionsLeft = 2; break;
                case 'hard': gameState.actionsLeft = 3; break;
                case 'expert': gameState.actionsLeft = 4; break;
            }
            
            // é‡ç½®å½“å¤©é“å…·ä½¿ç”¨æ ‡è®°
            gameState.toolUsedToday = false;
            
            // æ›´æ–°é“å…·çŠ¶æ€
            gameState.tools.forEach(tool => {
                if (tool.status === 'frozen') {
                    tool.status = 'active';
                }
            });
            
            // æ›´æ–°UI
            updateGameInfo();
            renderTools();
            renderSuspectGrid();
            
            // æ·»åŠ æ—¥å¿—
            addLogEntry(`ç¬¬ ${gameState.currentDay} å¤©å¼€å§‹ï¼Œä½ æœ‰ ${gameState.actionsLeft} ä¸ªè¡ŒåŠ¨ç‚¹`);
            
            // æ£€æŸ¥æ˜¯å¦æœ€åä¸€å¤©
            const daysLeft = 4 - gameState.currentDay;
            daysRemaining.textContent = `${daysLeft}å¤©`;
            daysRemaining.className = daysLeft === 1 ? 'info-value days-remaining danger' : 'info-value days-remaining';
            
            // æ›´æ–°ç»“æŸæŒ‰é’®æ–‡æœ¬
            nextDayText.textContent = `ç»“æŸç¬¬${gameState.currentDay}å¤©è°ƒæŸ¥`;
            
            // æ›´æ–°å½“å‰å¤©æ•°æ˜¾ç¤º
            currentDay.textContent = `ç¬¬${gameState.currentDay}å¤©`;
        }

        // æ¸²æŸ“é“å…· - é‡ç‚¹ä¼˜åŒ–éƒ¨åˆ†
        function renderTools() {
            toolsContainer.innerHTML = '';
            
            if (gameState.tools.length === 0) {
                toolsContainer.innerHTML = '<p style="text-align: center; color: #a0a0c0;">å½“å‰æ²¡æœ‰å¯ç”¨é“å…·</p>';
                return;
            }
            
            gameState.tools.forEach((tool, index) => {
                const toolCard = document.createElement('div');
                let cardClass = 'tool-card';
                
                if (tool.used) {
                    cardClass += ' used';
                } else if (tool.status === 'frozen') {
                    cardClass += ' frozen';
                }
                
                toolCard.className = cardClass;
                toolCard.dataset.index = index;
                toolCard.title = tool.desc;
                
                toolCard.innerHTML = `
                    <div class="tool-icon"><i class="${tool.icon}"></i></div>
                    <div class="tool-name">${tool.name}</div>
                `;
                
                if (tool.status === 'active' && !tool.used) {
                    toolCard.addEventListener('click', () => useTool(index));
                }
                
                toolsContainer.appendChild(toolCard);
            });
        }

        // æ¸²æŸ“æ¸¸æˆ
        function renderGame() {
            // è®¾ç½®æ•…äº‹èƒŒæ™¯
            storyContent.textContent = gameState.story;
            
            // æ¸²æŸ“é“å…·
            renderTools();
            
            // æ¸²æŸ“å«Œç–‘äººç½‘æ ¼
            renderSuspectGrid();
            
            // æ¸…ç©ºæ—¥å¿—
            logContent.innerHTML = '';
            addLogEntry("æ¡ˆä»¶è°ƒæŸ¥å¼€å§‹ã€‚æ‰¾å‡ºå‡¶æ‰‹ï¼Œä½ æœ‰3å¤©æ—¶é—´ï¼");
            
            // æ›´æ–°æ¸¸æˆä¿¡æ¯
            updateGameInfo();
        }

        // æ¸²æŸ“å«Œç–‘äººç½‘æ ¼
        function renderSuspectGrid() {
            suspectGrid.innerHTML = '';
            
            // è®¾ç½®ç½‘æ ¼ç±»
            let gridClass;
            switch(gameState.difficulty) {
                case 'easy': gridClass = 'grid-2x2'; break;
                case 'medium': gridClass = 'grid-3x3'; break;
                case 'hard': gridClass = 'grid-4x4'; break;
                case 'expert': gridClass = 'grid-5x5'; break;
            }
            suspectGrid.className = `grid-container ${gridClass}`;
            
            // åˆ›å»ºç½‘æ ¼å…ƒç´ 
            gameState.suspects.forEach((suspect, index) => {
                const cell = document.createElement('div');
                cell.className = 'suspect-cell';
                if (gameState.eliminated.includes(index)) {
                    cell.classList.add('eliminated');
                }
                cell.textContent = suspect;
                cell.dataset.index = index;
                
                cell.addEventListener('click', () => investigateSuspect(index));
                suspectGrid.appendChild(cell);
            });
        }

        // è°ƒæŸ¥å«Œç–‘äºº
        function investigateSuspect(index) {
            // æ£€æŸ¥æ¸¸æˆçŠ¶æ€
            if (gameState.gameOver || gameState.actionsLeft <= 0) return;
            
            // æ£€æŸ¥æ˜¯å¦å·²è¢«æ’é™¤
            if (gameState.eliminated.includes(index)) {
                addLogEntry("è¿™ä¸ªå«Œç–‘äººå·²ç»è¢«æ’é™¤è¿‡äº†ï¼", "eliminated");
                return;
            }
            
            // æ¶ˆè€—è¡ŒåŠ¨ç‚¹
            gameState.actionsLeft--;
            
            const suspect = gameState.suspects[index];
            
            // æ£€æŸ¥æ˜¯å¦æ˜¯å‡¶æ‰‹
            if (suspect === gameState.killer) {
                // æ¸¸æˆèƒœåˆ©
                endGame(true, index);
                return;
            }
            
            // æ’é™¤å«Œç–‘äºº
            gameState.eliminated.push(index);
            
            // è·å–è¯¥å«Œç–‘äººçš„è´¨ç–‘ç†ç”±
            const alibis = gameState.alibis[suspect];
            const randomAlibi = alibis[Math.floor(Math.random() * alibis.length)];
            
            addLogEntry(
                `ä½ è°ƒæŸ¥äº†å«Œç–‘äºº ${suspect}ï¼š${randomAlibi}ï¼Œæ’é™¤å«Œç–‘ï¼`,
                "eliminated"
            );
            
            // æ›´æ–°UI
            renderSuspectGrid();
            updateGameInfo();
            
            // æ£€æŸ¥æ˜¯å¦æ‰€æœ‰å«Œç–‘äººéƒ½è¢«æ’é™¤
            if (gameState.eliminated.length === gameState.suspects.length - 1) {
                // æ‰¾å‡ºå‡¶æ‰‹
                const killerIndex = gameState.suspects.findIndex((s, i) => s === gameState.killer && !gameState.eliminated.includes(i));
                endGame(true, killerIndex);
            }
            
            // æ£€æŸ¥è¡ŒåŠ¨ç‚¹æ˜¯å¦ç”¨å®Œ
            if (gameState.actionsLeft <= 0) {
                addLogEntry("ä»Šå¤©çš„è¡ŒåŠ¨ç‚¹å·²ç”¨å®Œã€‚æ˜å¤©ç»§ç»­è°ƒæŸ¥ï¼");
            }
        }

        // ä½¿ç”¨é“å…·
        function useTool(toolIndex) {
            // æ£€æŸ¥æ¸¸æˆçŠ¶æ€
            if (gameState.gameOver || gameState.actionsLeft <= 0) return;
            
            // æ£€æŸ¥å½“å¤©æ˜¯å¦å·²ä½¿ç”¨è¿‡é“å…·
            if (gameState.toolUsedToday) {
                addLogEntry("ä»Šå¤©å·²ç»ä½¿ç”¨è¿‡é“å…·äº†ï¼");
                return;
            }
            
            // è·å–é“å…·
            const tool = gameState.tools[toolIndex];
            
            // æ£€æŸ¥é“å…·æ˜¯å¦å¯ç”¨
            if (tool.used || tool.status !== 'active') {
                addLogEntry("è¿™ä¸ªé“å…·å½“å‰ä¸å¯ç”¨ï¼");
                return;
            }
            
            // æ¶ˆè€—è¡ŒåŠ¨ç‚¹
            gameState.actionsLeft--;
            
            // æ ‡è®°é“å…·ä¸ºå·²ä½¿ç”¨
            tool.used = true;
            gameState.toolUsedToday = true;
            
            // å†»ç»“å…¶ä»–æœªä½¿ç”¨çš„é“å…·
            gameState.tools.forEach((t, idx) => {
                if (idx !== toolIndex && !t.used) {
                    t.status = 'frozen';
                }
            });
            
            // æ ¹æ®é“å…·ç±»å‹æ‰§è¡Œæ•ˆæœ
            let eliminated = [];
            let toolName = tool.name;
            
            switch(tool.id) {
                case 1: // çº¿ç´¢åˆ†æï¼ˆéšæœºæ’é™¤2-4ä¸ªï¼‰
                    const count = Math.min(4, gameState.suspects.length - gameState.eliminated.length - 1);
                    const toEliminate = Math.max(2, Math.floor(count * 0.6));
                    
                    for (let i = 0; i < toEliminate; i++) {
                        let randomIndex;
                        do {
                            randomIndex = Math.floor(Math.random() * gameState.suspects.length);
                        } while (
                            gameState.eliminated.includes(randomIndex) || 
                            gameState.suspects[randomIndex] === gameState.killer ||
                            eliminated.includes(randomIndex)
                        );
                        eliminated.push(randomIndex);
                    }
                    addLogEntry(`ä½ ä½¿ç”¨äº†ã€${toolName}ã€‘ï¼Œæ’é™¤äº† ${eliminated.length} åæ— è¾œå«Œç–‘äºº`, "tool-used");
                    break;
                    
                case 2: // åŒºåŸŸæ’é™¤ï¼ˆæ•´è¡Œæˆ–æ•´åˆ—ï¼‰
                    const gridSize = Math.sqrt(gameState.suspects.length);
                    const isRow = Math.random() > 0.5;
                    const lineIndex = Math.floor(Math.random() * gridSize);
                    
                    for (let i = 0; i < gridSize; i++) {
                        const index = isRow ? (lineIndex * gridSize + i) : (i * gridSize + lineIndex);
                        if (!gameState.eliminated.includes(index)) {
                            eliminated.push(index);
                        }
                    }
                    addLogEntry(`ä½ ä½¿ç”¨äº†ã€${toolName}ã€‘ï¼Œæ’é™¤äº†${isRow ? 'ä¸€è¡Œ' : 'ä¸€åˆ—'}å«Œç–‘äºº`, "tool-used");
                    break;
                    
                case 3: // æ— è¾œæ’é™¤ï¼ˆéšæœºæ’é™¤3-5ä¸ªï¼‰
                    const count2 = Math.min(5, gameState.suspects.length - gameState.eliminated.length - 1);
                    const toEliminate2 = Math.max(3, Math.floor(count2 * 0.7));
                    
                    for (let i = 0; i < toEliminate2; i++) {
                        let randomIndex;
                        do {
                            randomIndex = Math.floor(Math.random() * gameState.suspects.length);
                        } while (
                            gameState.eliminated.includes(randomIndex) || 
                            gameState.suspects[randomIndex] === gameState.killer ||
                            eliminated.includes(randomIndex)
                        );
                        eliminated.push(randomIndex);
                    }
                    addLogEntry(`ä½ ä½¿ç”¨äº†ã€${toolName}ã€‘ï¼Œæ’é™¤äº† ${eliminated.length} åæ— è¾œå«Œç–‘äºº`, "tool-used");
                    break;
            }
            
            // æ’é™¤å«Œç–‘äººï¼ˆç¡®ä¿ä¸æ’é™¤å‡¶æ‰‹ï¼‰
            eliminated = eliminated.filter(index => gameState.suspects[index] !== gameState.killer);
            gameState.eliminated = [...gameState.eliminated, ...eliminated];
            
            // æ›´æ–°UI
            renderTools();
            renderSuspectGrid();
            updateGameInfo();
            
            // æ£€æŸ¥æ˜¯å¦æ‰€æœ‰å«Œç–‘äººéƒ½è¢«æ’é™¤
            if (gameState.eliminated.length === gameState.suspects.length - 1) {
                // æ‰¾å‡ºå‡¶æ‰‹
                const killerIndex = gameState.suspects.findIndex((s, i) => s === gameState.killer && !gameState.eliminated.includes(i));
                endGame(true, killerIndex);
            }
        }

        // ç»“æŸä¸€å¤©
        function endDay() {
            gameState.currentDay++;
            
            // æ£€æŸ¥æ˜¯å¦è¶…è¿‡3å¤©
            if (gameState.currentDay > 3) {
                endGame(false);
                return;
            }
            
            startNewDay();
        }

        // ç»“æŸæ¸¸æˆ
        function endGame(isWin, killerIndex = null) {
            gameState.gameOver = true;
            
            if (isWin) {
                modalTitle.textContent = "æ¡ˆä»¶ä¾¦ç ´ï¼";
                modalSubtitle.textContent = "ä½ æˆåŠŸæŠ“ä½äº†çœŸå‡¶ï¼";
                killerEmoji.textContent = gameState.killer;
                killerConfirm.textContent = `âœ… å‡¶æ‰‹æ˜¯ ${gameState.killer}`;
            } else {
                modalTitle.textContent = "æ¸¸æˆç»“æŸ";
                modalSubtitle.textContent = "å‡¶æ‰‹é€ƒè„±äº†...";
                killerEmoji.textContent = gameState.killer;
                killerConfirm.textContent = `çœŸå‡¶æ˜¯ ${gameState.killer}`;
            }
            
            truthReveal.textContent = gameState.truth;
            gameOverModal.classList.add('active');
        }

        // æ·»åŠ æ—¥å¿—æ¡ç›®
        function addLogEntry(message, type = "") {
            const now = new Date();
            const timeString = `${now.getHours().toString().padStart(2, '0')}:${now.getMinutes().toString().padStart(2, '0')}`;
            
            const logEntry = document.createElement('div');
            logEntry.className = `log-entry ${type}`;
            logEntry.innerHTML = `
                <div class="log-time">${timeString}</div>
                <div>${message}</div>
            `;
            
            logContent.appendChild(logEntry);
            logContent.scrollTop = logContent.scrollHeight;
        }

        // æ›´æ–°æ¸¸æˆä¿¡æ¯
        function updateGameInfo() {
            daysRemaining.textContent = `${4 - gameState.currentDay}å¤©`;
            daysRemaining.className = (4 - gameState.currentDay) === 1 ? 
                'info-value days-remaining danger' : 'info-value days-remaining';
                
            actionsRemaining.textContent = gameState.actionsLeft;
            eliminatedCount.textContent = gameState.eliminated.length;
            remainingCount.textContent = gameState.suspects.length - gameState.eliminated.length;
        }

        // äº‹ä»¶ç›‘å¬å™¨
        document.querySelectorAll('.difficulty-card').forEach(card => {
            card.addEventListener('click', () => {
                const difficulty = card.dataset.difficulty;
                initGame(difficulty);
            });
        });

        document.getElementById('nextDayBtn').addEventListener('click', endDay);
        document.getElementById('restartBtn').addEventListener('click', () => {
            gameContainer.style.display = 'none';
            difficultyScreen.style.display = 'block';
        });

        document.getElementById('playAgainBtn').addEventListener('click', () => {
            gameOverModal.classList.remove('active');
            gameContainer.style.display = 'none';
            difficultyScreen.style.display = 'block';
        });
    </script>
</body>
</html>
